(()=>{var kn=Object.create;var Ve=Object.defineProperty;var Cn=Object.getOwnPropertyDescriptor;var Dn=Object.getOwnPropertyNames;var Fn=Object.getPrototypeOf,jn=Object.prototype.hasOwnProperty;var ge=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var $=(e,t)=>()=>(e&&(t=e(e=0)),t);var k=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var lt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Dn(t))!jn.call(e,a)&&a!==r&&Ve(e,a,{get:()=>t[a],enumerable:!(n=Cn(t,a))||n.enumerable});return e};var J=(e,t,r)=>(r=e!=null?kn(Fn(e)):{},lt(t||!e||!e.__esModule?Ve(r,"default",{value:e,enumerable:!0}):r,e)),K=e=>lt(Ve({},"__esModule",{value:!0}),e);var ee=k(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.setMatrixArrayType=Nn;U.toRadian=Yn;U.equals=Hn;U.RANDOM=U.ARRAY_TYPE=U.EPSILON=void 0;var ft=1e-6;U.EPSILON=ft;var ht=typeof Float32Array<"u"?Float32Array:Array;U.ARRAY_TYPE=ht;var zn=Math.random;U.RANDOM=zn;function Nn(e){U.ARRAY_TYPE=ht=e}var Vn=Math.PI/180;function Yn(e){return e*Vn}function Hn(e,t){return Math.abs(e-t)<=ft*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});var vt=k(z=>{"use strict";function Me(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Me=function(r){return typeof r}:Me=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Me(e)}Object.defineProperty(z,"__esModule",{value:!0});z.create=Xn;z.clone=Gn;z.copy=Un;z.identity=Qn;z.fromValues=Zn;z.set=$n;z.transpose=Jn;z.invert=Kn;z.adjoint=ei;z.determinant=ti;z.multiply=dt;z.rotate=ri;z.scale=ni;z.fromRotation=ii;z.fromScaling=ai;z.str=si;z.frob=oi;z.LDU=ci;z.add=li;z.subtract=pt;z.exactEquals=fi;z.equals=hi;z.multiplyScalar=ui;z.multiplyScalarAndAdd=di;z.sub=z.mul=void 0;var fe=Bn(ee());function ut(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(ut=function(a){return a?r:t})(e)}function Bn(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Me(e)!=="object"&&typeof e!="function")return{default:e};var r=ut(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function Xn(){var e=new fe.ARRAY_TYPE(4);return fe.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function Gn(e){var t=new fe.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Un(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Qn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function Zn(e,t,r,n){var a=new fe.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function $n(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function Jn(e,t){if(e===t){var r=t[1];e[1]=t[2],e[2]=r}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function Kn(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r*s-a*n;return c?(c=1/c,e[0]=s*c,e[1]=-n*c,e[2]=-a*c,e[3]=r*c,e):null}function ei(e,t){var r=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=r,e}function ti(e){return e[0]*e[3]-e[2]*e[1]}function dt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1],u=r[2],i=r[3];return e[0]=n*l+s*f,e[1]=a*l+c*f,e[2]=n*u+s*i,e[3]=a*u+c*i,e}function ri(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+s*l,e[1]=a*f+c*l,e[2]=n*-l+s*f,e[3]=a*-l+c*f,e}function ni(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1];return e[0]=n*l,e[1]=a*l,e[2]=s*f,e[3]=c*f,e}function ii(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e}function ai(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function si(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function oi(e){return Math.hypot(e[0],e[1],e[2],e[3])}function ci(e,t,r,n){return e[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-e[2]*r[1],[e,t,r]}function li(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function pt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function fi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function hi(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=t[0],l=t[1],f=t[2],u=t[3];return Math.abs(r-c)<=fe.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=fe.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-f)<=fe.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-u)<=fe.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}function ui(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function di(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}var pi=dt;z.mul=pi;var vi=pt;z.sub=vi});var gt=k(N=>{"use strict";function be(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?be=function(r){return typeof r}:be=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},be(e)}Object.defineProperty(N,"__esModule",{value:!0});N.create=mi;N.clone=yi;N.copy=gi;N.identity=Mi;N.fromValues=bi;N.set=wi;N.invert=xi;N.determinant=Ai;N.multiply=mt;N.rotate=Ti;N.scale=Si;N.translate=Oi;N.fromRotation=Li;N.fromScaling=Pi;N.fromTranslation=Ri;N.str=Ii;N.frob=qi;N.add=Ei;N.subtract=yt;N.multiplyScalar=Wi;N.multiplyScalarAndAdd=ki;N.exactEquals=Ci;N.equals=Di;N.sub=N.mul=void 0;var te=_i(ee());function _t(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(_t=function(a){return a?r:t})(e)}function _i(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||be(e)!=="object"&&typeof e!="function")return{default:e};var r=_t(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function mi(){var e=new te.ARRAY_TYPE(6);return te.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function yi(e){var t=new te.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function gi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Mi(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function bi(e,t,r,n,a,s){var c=new te.ARRAY_TYPE(6);return c[0]=e,c[1]=t,c[2]=r,c[3]=n,c[4]=a,c[5]=s,c}function wi(e,t,r,n,a,s,c){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e}function xi(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=r*s-n*a;return f?(f=1/f,e[0]=s*f,e[1]=-n*f,e[2]=-a*f,e[3]=r*f,e[4]=(a*l-s*c)*f,e[5]=(n*c-r*l)*f,e):null}function Ai(e){return e[0]*e[3]-e[1]*e[2]}function mt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=r[0],i=r[1],o=r[2],h=r[3],d=r[4],v=r[5];return e[0]=n*u+s*i,e[1]=a*u+c*i,e[2]=n*o+s*h,e[3]=a*o+c*h,e[4]=n*d+s*v+l,e[5]=a*d+c*v+f,e}function Ti(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=Math.sin(r),i=Math.cos(r);return e[0]=n*i+s*u,e[1]=a*i+c*u,e[2]=n*-u+s*i,e[3]=a*-u+c*i,e[4]=l,e[5]=f,e}function Si(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=r[0],i=r[1];return e[0]=n*u,e[1]=a*u,e[2]=s*i,e[3]=c*i,e[4]=l,e[5]=f,e}function Oi(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=r[0],i=r[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=n*u+s*i+l,e[5]=a*u+c*i+f,e}function Li(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=-r,e[3]=n,e[4]=0,e[5]=0,e}function Pi(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function Ri(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Ii(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function qi(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function Ei(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function yt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function Wi(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function ki(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e}function Ci(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Di(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=t[0],u=t[1],i=t[2],o=t[3],h=t[4],d=t[5];return Math.abs(r-f)<=te.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-u)<=te.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-i)<=te.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(s-o)<=te.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(c-h)<=te.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(l-d)<=te.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))}var Fi=mt;N.mul=Fi;var ji=yt;N.sub=ji});var Ye=k(D=>{"use strict";function we(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?we=function(r){return typeof r}:we=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},we(e)}Object.defineProperty(D,"__esModule",{value:!0});D.create=Ni;D.fromMat4=Vi;D.clone=Yi;D.copy=Hi;D.fromValues=Bi;D.set=Xi;D.identity=Gi;D.transpose=Ui;D.invert=Qi;D.adjoint=Zi;D.determinant=$i;D.multiply=bt;D.translate=Ji;D.rotate=Ki;D.scale=ea;D.fromTranslation=ta;D.fromRotation=ra;D.fromScaling=na;D.fromMat2d=ia;D.fromQuat=aa;D.normalFromMat4=sa;D.projection=oa;D.str=ca;D.frob=la;D.add=fa;D.subtract=wt;D.multiplyScalar=ha;D.multiplyScalarAndAdd=ua;D.exactEquals=da;D.equals=pa;D.sub=D.mul=void 0;var B=zi(ee());function Mt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Mt=function(a){return a?r:t})(e)}function zi(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||we(e)!=="object"&&typeof e!="function")return{default:e};var r=Mt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function Ni(){var e=new B.ARRAY_TYPE(9);return B.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Vi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Yi(e){var t=new B.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Hi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Bi(e,t,r,n,a,s,c,l,f){var u=new B.ARRAY_TYPE(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=n,u[4]=a,u[5]=s,u[6]=c,u[7]=l,u[8]=f,u}function Xi(e,t,r,n,a,s,c,l,f,u){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=f,e[8]=u,e}function Gi(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ui(e,t){if(e===t){var r=t[1],n=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Qi(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=i*c-l*u,h=-i*s+l*f,d=u*s-c*f,v=r*o+n*h+a*d;return v?(v=1/v,e[0]=o*v,e[1]=(-i*n+a*u)*v,e[2]=(l*n-a*c)*v,e[3]=h*v,e[4]=(i*r-a*f)*v,e[5]=(-l*r+a*s)*v,e[6]=d*v,e[7]=(-u*r+n*f)*v,e[8]=(c*r-n*s)*v,e):null}function Zi(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8];return e[0]=c*i-l*u,e[1]=a*u-n*i,e[2]=n*l-a*c,e[3]=l*f-s*i,e[4]=r*i-a*f,e[5]=a*s-r*l,e[6]=s*u-c*f,e[7]=n*f-r*u,e[8]=r*c-n*s,e}function $i(e){var t=e[0],r=e[1],n=e[2],a=e[3],s=e[4],c=e[5],l=e[6],f=e[7],u=e[8];return t*(u*s-c*f)+r*(-u*a+c*l)+n*(f*a-s*l)}function bt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=r[0],d=r[1],v=r[2],_=r[3],p=r[4],m=r[5],y=r[6],M=r[7],b=r[8];return e[0]=h*n+d*c+v*u,e[1]=h*a+d*l+v*i,e[2]=h*s+d*f+v*o,e[3]=_*n+p*c+m*u,e[4]=_*a+p*l+m*i,e[5]=_*s+p*f+m*o,e[6]=y*n+M*c+b*u,e[7]=y*a+M*l+b*i,e[8]=y*s+M*f+b*o,e}function Ji(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=l,e[5]=f,e[6]=h*n+d*c+u,e[7]=h*a+d*l+i,e[8]=h*s+d*f+o,e}function Ki(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*c,e[1]=d*a+h*l,e[2]=d*s+h*f,e[3]=d*c-h*n,e[4]=d*l-h*a,e[5]=d*f-h*s,e[6]=u,e[7]=i,e[8]=o,e}function ea(e,t,r){var n=r[0],a=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ta(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ra(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function na(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function ia(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function aa(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r+r,l=n+n,f=a+a,u=r*c,i=n*c,o=n*l,h=a*c,d=a*l,v=a*f,_=s*c,p=s*l,m=s*f;return e[0]=1-o-v,e[3]=i-m,e[6]=h+p,e[1]=i+m,e[4]=1-u-v,e[7]=d-_,e[2]=h-p,e[5]=d+_,e[8]=1-u-o,e}function sa(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=t[9],h=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15],y=r*l-n*c,M=r*f-a*c,b=r*u-s*c,x=n*f-a*l,A=n*u-s*l,g=a*u-s*f,w=i*_-o*v,C=i*p-h*v,W=i*m-d*v,I=o*p-h*_,F=o*m-d*_,j=h*m-d*p,q=y*j-M*F+b*I+x*W-A*C+g*w;return q?(q=1/q,e[0]=(l*j-f*F+u*I)*q,e[1]=(f*W-c*j-u*C)*q,e[2]=(c*F-l*W+u*w)*q,e[3]=(a*F-n*j-s*I)*q,e[4]=(r*j-a*W+s*C)*q,e[5]=(n*W-r*F-s*w)*q,e[6]=(_*g-p*A+m*x)*q,e[7]=(p*b-v*g-m*M)*q,e[8]=(v*A-_*b+m*y)*q,e):null}function oa(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function ca(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function la(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function fa(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function wt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function ha(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function ua(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function da(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function pa(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=e[6],u=e[7],i=e[8],o=t[0],h=t[1],d=t[2],v=t[3],_=t[4],p=t[5],m=t[6],y=t[7],M=t[8];return Math.abs(r-o)<=B.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-h)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(a-d)<=B.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-v)<=B.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(c-_)<=B.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-p)<=B.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(f-m)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(m))&&Math.abs(u-y)<=B.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(i-M)<=B.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))}var va=bt;D.mul=va;var _a=wt;D.sub=_a});var He=k(O=>{"use strict";function xe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xe=function(r){return typeof r}:xe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},xe(e)}Object.defineProperty(O,"__esModule",{value:!0});O.create=ya;O.clone=ga;O.copy=Ma;O.fromValues=ba;O.set=wa;O.identity=At;O.transpose=xa;O.invert=Aa;O.adjoint=Ta;O.determinant=Sa;O.multiply=Tt;O.translate=Oa;O.scale=La;O.rotate=Pa;O.rotateX=Ra;O.rotateY=Ia;O.rotateZ=qa;O.fromTranslation=Ea;O.fromScaling=Wa;O.fromRotation=ka;O.fromXRotation=Ca;O.fromYRotation=Da;O.fromZRotation=Fa;O.fromRotationTranslation=St;O.fromQuat2=ja;O.getTranslation=za;O.getScaling=Ot;O.getRotation=Na;O.fromRotationTranslationScale=Va;O.fromRotationTranslationScaleOrigin=Ya;O.fromQuat=Ha;O.frustum=Ba;O.perspectiveNO=Lt;O.perspectiveZO=Ga;O.perspectiveFromFieldOfView=Ua;O.orthoNO=Pt;O.orthoZO=Za;O.lookAt=$a;O.targetTo=Ja;O.str=Ka;O.frob=es;O.add=ts;O.subtract=Rt;O.multiplyScalar=rs;O.multiplyScalarAndAdd=ns;O.exactEquals=is;O.equals=as;O.sub=O.mul=O.ortho=O.perspective=void 0;var V=ma(ee());function xt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(xt=function(a){return a?r:t})(e)}function ma(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||xe(e)!=="object"&&typeof e!="function")return{default:e};var r=xt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function ya(){var e=new V.ARRAY_TYPE(16);return V.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ga(e){var t=new V.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ma(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ba(e,t,r,n,a,s,c,l,f,u,i,o,h,d,v,_){var p=new V.ARRAY_TYPE(16);return p[0]=e,p[1]=t,p[2]=r,p[3]=n,p[4]=a,p[5]=s,p[6]=c,p[7]=l,p[8]=f,p[9]=u,p[10]=i,p[11]=o,p[12]=h,p[13]=d,p[14]=v,p[15]=_,p}function wa(e,t,r,n,a,s,c,l,f,u,i,o,h,d,v,_,p){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=f,e[8]=u,e[9]=i,e[10]=o,e[11]=h,e[12]=d,e[13]=v,e[14]=_,e[15]=p,e}function At(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xa(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],s=t[6],c=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=s,e[11]=t[14],e[12]=a,e[13]=c,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Aa(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=t[9],h=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15],y=r*l-n*c,M=r*f-a*c,b=r*u-s*c,x=n*f-a*l,A=n*u-s*l,g=a*u-s*f,w=i*_-o*v,C=i*p-h*v,W=i*m-d*v,I=o*p-h*_,F=o*m-d*_,j=h*m-d*p,q=y*j-M*F+b*I+x*W-A*C+g*w;return q?(q=1/q,e[0]=(l*j-f*F+u*I)*q,e[1]=(a*F-n*j-s*I)*q,e[2]=(_*g-p*A+m*x)*q,e[3]=(h*A-o*g-d*x)*q,e[4]=(f*W-c*j-u*C)*q,e[5]=(r*j-a*W+s*C)*q,e[6]=(p*b-v*g-m*M)*q,e[7]=(i*g-h*b+d*M)*q,e[8]=(c*F-l*W+u*w)*q,e[9]=(n*W-r*F-s*w)*q,e[10]=(v*A-_*b+m*y)*q,e[11]=(o*b-i*A-d*y)*q,e[12]=(l*C-c*I-f*w)*q,e[13]=(r*I-n*C+a*w)*q,e[14]=(_*M-v*x-p*y)*q,e[15]=(i*x-o*M+h*y)*q,e):null}function Ta(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=t[4],l=t[5],f=t[6],u=t[7],i=t[8],o=t[9],h=t[10],d=t[11],v=t[12],_=t[13],p=t[14],m=t[15];return e[0]=l*(h*m-d*p)-o*(f*m-u*p)+_*(f*d-u*h),e[1]=-(n*(h*m-d*p)-o*(a*m-s*p)+_*(a*d-s*h)),e[2]=n*(f*m-u*p)-l*(a*m-s*p)+_*(a*u-s*f),e[3]=-(n*(f*d-u*h)-l*(a*d-s*h)+o*(a*u-s*f)),e[4]=-(c*(h*m-d*p)-i*(f*m-u*p)+v*(f*d-u*h)),e[5]=r*(h*m-d*p)-i*(a*m-s*p)+v*(a*d-s*h),e[6]=-(r*(f*m-u*p)-c*(a*m-s*p)+v*(a*u-s*f)),e[7]=r*(f*d-u*h)-c*(a*d-s*h)+i*(a*u-s*f),e[8]=c*(o*m-d*_)-i*(l*m-u*_)+v*(l*d-u*o),e[9]=-(r*(o*m-d*_)-i*(n*m-s*_)+v*(n*d-s*o)),e[10]=r*(l*m-u*_)-c*(n*m-s*_)+v*(n*u-s*l),e[11]=-(r*(l*d-u*o)-c*(n*d-s*o)+i*(n*u-s*l)),e[12]=-(c*(o*p-h*_)-i*(l*p-f*_)+v*(l*h-f*o)),e[13]=r*(o*p-h*_)-i*(n*p-a*_)+v*(n*h-a*o),e[14]=-(r*(l*p-f*_)-c*(n*p-a*_)+v*(n*f-a*l)),e[15]=r*(l*h-f*o)-c*(n*h-a*o)+i*(n*f-a*l),e}function Sa(e){var t=e[0],r=e[1],n=e[2],a=e[3],s=e[4],c=e[5],l=e[6],f=e[7],u=e[8],i=e[9],o=e[10],h=e[11],d=e[12],v=e[13],_=e[14],p=e[15],m=t*c-r*s,y=t*l-n*s,M=t*f-a*s,b=r*l-n*c,x=r*f-a*c,A=n*f-a*l,g=u*v-i*d,w=u*_-o*d,C=u*p-h*d,W=i*_-o*v,I=i*p-h*v,F=o*p-h*_;return m*F-y*I+M*W+b*C-x*w+A*g}function Tt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=t[8],h=t[9],d=t[10],v=t[11],_=t[12],p=t[13],m=t[14],y=t[15],M=r[0],b=r[1],x=r[2],A=r[3];return e[0]=M*n+b*l+x*o+A*_,e[1]=M*a+b*f+x*h+A*p,e[2]=M*s+b*u+x*d+A*m,e[3]=M*c+b*i+x*v+A*y,M=r[4],b=r[5],x=r[6],A=r[7],e[4]=M*n+b*l+x*o+A*_,e[5]=M*a+b*f+x*h+A*p,e[6]=M*s+b*u+x*d+A*m,e[7]=M*c+b*i+x*v+A*y,M=r[8],b=r[9],x=r[10],A=r[11],e[8]=M*n+b*l+x*o+A*_,e[9]=M*a+b*f+x*h+A*p,e[10]=M*s+b*u+x*d+A*m,e[11]=M*c+b*i+x*v+A*y,M=r[12],b=r[13],x=r[14],A=r[15],e[12]=M*n+b*l+x*o+A*_,e[13]=M*a+b*f+x*h+A*p,e[14]=M*s+b*u+x*d+A*m,e[15]=M*c+b*i+x*v+A*y,e}function Oa(e,t,r){var n=r[0],a=r[1],s=r[2],c,l,f,u,i,o,h,d,v,_,p,m;return t===e?(e[12]=t[0]*n+t[4]*a+t[8]*s+t[12],e[13]=t[1]*n+t[5]*a+t[9]*s+t[13],e[14]=t[2]*n+t[6]*a+t[10]*s+t[14],e[15]=t[3]*n+t[7]*a+t[11]*s+t[15]):(c=t[0],l=t[1],f=t[2],u=t[3],i=t[4],o=t[5],h=t[6],d=t[7],v=t[8],_=t[9],p=t[10],m=t[11],e[0]=c,e[1]=l,e[2]=f,e[3]=u,e[4]=i,e[5]=o,e[6]=h,e[7]=d,e[8]=v,e[9]=_,e[10]=p,e[11]=m,e[12]=c*n+i*a+v*s+t[12],e[13]=l*n+o*a+_*s+t[13],e[14]=f*n+h*a+p*s+t[14],e[15]=u*n+d*a+m*s+t[15]),e}function La(e,t,r){var n=r[0],a=r[1],s=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Pa(e,t,r,n){var a=n[0],s=n[1],c=n[2],l=Math.hypot(a,s,c),f,u,i,o,h,d,v,_,p,m,y,M,b,x,A,g,w,C,W,I,F,j,q,Z;return l<V.EPSILON?null:(l=1/l,a*=l,s*=l,c*=l,f=Math.sin(r),u=Math.cos(r),i=1-u,o=t[0],h=t[1],d=t[2],v=t[3],_=t[4],p=t[5],m=t[6],y=t[7],M=t[8],b=t[9],x=t[10],A=t[11],g=a*a*i+u,w=s*a*i+c*f,C=c*a*i-s*f,W=a*s*i-c*f,I=s*s*i+u,F=c*s*i+a*f,j=a*c*i+s*f,q=s*c*i-a*f,Z=c*c*i+u,e[0]=o*g+_*w+M*C,e[1]=h*g+p*w+b*C,e[2]=d*g+m*w+x*C,e[3]=v*g+y*w+A*C,e[4]=o*W+_*I+M*F,e[5]=h*W+p*I+b*F,e[6]=d*W+m*I+x*F,e[7]=v*W+y*I+A*F,e[8]=o*j+_*q+M*Z,e[9]=h*j+p*q+b*Z,e[10]=d*j+m*q+x*Z,e[11]=v*j+y*q+A*Z,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Ra(e,t,r){var n=Math.sin(r),a=Math.cos(r),s=t[4],c=t[5],l=t[6],f=t[7],u=t[8],i=t[9],o=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+u*n,e[5]=c*a+i*n,e[6]=l*a+o*n,e[7]=f*a+h*n,e[8]=u*a-s*n,e[9]=i*a-c*n,e[10]=o*a-l*n,e[11]=h*a-f*n,e}function Ia(e,t,r){var n=Math.sin(r),a=Math.cos(r),s=t[0],c=t[1],l=t[2],f=t[3],u=t[8],i=t[9],o=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-u*n,e[1]=c*a-i*n,e[2]=l*a-o*n,e[3]=f*a-h*n,e[8]=s*n+u*a,e[9]=c*n+i*a,e[10]=l*n+o*a,e[11]=f*n+h*a,e}function qa(e,t,r){var n=Math.sin(r),a=Math.cos(r),s=t[0],c=t[1],l=t[2],f=t[3],u=t[4],i=t[5],o=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+u*n,e[1]=c*a+i*n,e[2]=l*a+o*n,e[3]=f*a+h*n,e[4]=u*a-s*n,e[5]=i*a-c*n,e[6]=o*a-l*n,e[7]=h*a-f*n,e}function Ea(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Wa(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function ka(e,t,r){var n=r[0],a=r[1],s=r[2],c=Math.hypot(n,a,s),l,f,u;return c<V.EPSILON?null:(c=1/c,n*=c,a*=c,s*=c,l=Math.sin(t),f=Math.cos(t),u=1-f,e[0]=n*n*u+f,e[1]=a*n*u+s*l,e[2]=s*n*u-a*l,e[3]=0,e[4]=n*a*u-s*l,e[5]=a*a*u+f,e[6]=s*a*u+n*l,e[7]=0,e[8]=n*s*u+a*l,e[9]=a*s*u-n*l,e[10]=s*s*u+f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Ca(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Da(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fa(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function St(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=n+n,f=a+a,u=s+s,i=n*l,o=n*f,h=n*u,d=a*f,v=a*u,_=s*u,p=c*l,m=c*f,y=c*u;return e[0]=1-(d+_),e[1]=o+y,e[2]=h-m,e[3]=0,e[4]=o-y,e[5]=1-(i+_),e[6]=v+p,e[7]=0,e[8]=h+m,e[9]=v-p,e[10]=1-(i+d),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function ja(e,t){var r=new V.ARRAY_TYPE(3),n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=n*n+a*a+s*s+c*c;return o>0?(r[0]=(l*c+i*n+f*s-u*a)*2/o,r[1]=(f*c+i*a+u*n-l*s)*2/o,r[2]=(u*c+i*s+l*a-f*n)*2/o):(r[0]=(l*c+i*n+f*s-u*a)*2,r[1]=(f*c+i*a+u*n-l*s)*2,r[2]=(u*c+i*s+l*a-f*n)*2),St(e,t,r),e}function za(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Ot(e,t){var r=t[0],n=t[1],a=t[2],s=t[4],c=t[5],l=t[6],f=t[8],u=t[9],i=t[10];return e[0]=Math.hypot(r,n,a),e[1]=Math.hypot(s,c,l),e[2]=Math.hypot(f,u,i),e}function Na(e,t){var r=new V.ARRAY_TYPE(3);Ot(r,t);var n=1/r[0],a=1/r[1],s=1/r[2],c=t[0]*n,l=t[1]*a,f=t[2]*s,u=t[4]*n,i=t[5]*a,o=t[6]*s,h=t[8]*n,d=t[9]*a,v=t[10]*s,_=c+i+v,p=0;return _>0?(p=Math.sqrt(_+1)*2,e[3]=.25*p,e[0]=(o-d)/p,e[1]=(h-f)/p,e[2]=(l-u)/p):c>i&&c>v?(p=Math.sqrt(1+c-i-v)*2,e[3]=(o-d)/p,e[0]=.25*p,e[1]=(l+u)/p,e[2]=(h+f)/p):i>v?(p=Math.sqrt(1+i-c-v)*2,e[3]=(h-f)/p,e[0]=(l+u)/p,e[1]=.25*p,e[2]=(o+d)/p):(p=Math.sqrt(1+v-c-i)*2,e[3]=(l-u)/p,e[0]=(h+f)/p,e[1]=(o+d)/p,e[2]=.25*p),e}function Va(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=t[3],f=a+a,u=s+s,i=c+c,o=a*f,h=a*u,d=a*i,v=s*u,_=s*i,p=c*i,m=l*f,y=l*u,M=l*i,b=n[0],x=n[1],A=n[2];return e[0]=(1-(v+p))*b,e[1]=(h+M)*b,e[2]=(d-y)*b,e[3]=0,e[4]=(h-M)*x,e[5]=(1-(o+p))*x,e[6]=(_+m)*x,e[7]=0,e[8]=(d+y)*A,e[9]=(_-m)*A,e[10]=(1-(o+v))*A,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Ya(e,t,r,n,a){var s=t[0],c=t[1],l=t[2],f=t[3],u=s+s,i=c+c,o=l+l,h=s*u,d=s*i,v=s*o,_=c*i,p=c*o,m=l*o,y=f*u,M=f*i,b=f*o,x=n[0],A=n[1],g=n[2],w=a[0],C=a[1],W=a[2],I=(1-(_+m))*x,F=(d+b)*x,j=(v-M)*x,q=(d-b)*A,Z=(1-(h+m))*A,me=(p+y)*A,ye=(v+M)*g,ot=(p-y)*g,ct=(1-(h+_))*g;return e[0]=I,e[1]=F,e[2]=j,e[3]=0,e[4]=q,e[5]=Z,e[6]=me,e[7]=0,e[8]=ye,e[9]=ot,e[10]=ct,e[11]=0,e[12]=r[0]+w-(I*w+q*C+ye*W),e[13]=r[1]+C-(F*w+Z*C+ot*W),e[14]=r[2]+W-(j*w+me*C+ct*W),e[15]=1,e}function Ha(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r+r,l=n+n,f=a+a,u=r*c,i=n*c,o=n*l,h=a*c,d=a*l,v=a*f,_=s*c,p=s*l,m=s*f;return e[0]=1-o-v,e[1]=i+m,e[2]=h-p,e[3]=0,e[4]=i-m,e[5]=1-u-v,e[6]=d+_,e[7]=0,e[8]=h+p,e[9]=d-_,e[10]=1-u-o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ba(e,t,r,n,a,s,c){var l=1/(r-t),f=1/(a-n),u=1/(s-c);return e[0]=s*2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*f,e[6]=0,e[7]=0,e[8]=(r+t)*l,e[9]=(a+n)*f,e[10]=(c+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=c*s*2*u,e[15]=0,e}function Lt(e,t,r,n,a){var s=1/Math.tan(t/2),c;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(c=1/(n-a),e[10]=(a+n)*c,e[14]=2*a*n*c):(e[10]=-1,e[14]=-2*n),e}var Xa=Lt;O.perspective=Xa;function Ga(e,t,r,n,a){var s=1/Math.tan(t/2),c;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(c=1/(n-a),e[10]=a*c,e[14]=a*n*c):(e[10]=-1,e[14]=-n),e}function Ua(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),c=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),f=2/(c+l),u=2/(a+s);return e[0]=f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((c-l)*f*.5),e[9]=(a-s)*u*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function Pt(e,t,r,n,a,s,c){var l=1/(t-r),f=1/(n-a),u=1/(s-c);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*l,e[13]=(a+n)*f,e[14]=(c+s)*u,e[15]=1,e}var Qa=Pt;O.ortho=Qa;function Za(e,t,r,n,a,s,c){var l=1/(t-r),f=1/(n-a),u=1/(s-c);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*f,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+r)*l,e[13]=(a+n)*f,e[14]=s*u,e[15]=1,e}function $a(e,t,r,n){var a,s,c,l,f,u,i,o,h,d,v=t[0],_=t[1],p=t[2],m=n[0],y=n[1],M=n[2],b=r[0],x=r[1],A=r[2];return Math.abs(v-b)<V.EPSILON&&Math.abs(_-x)<V.EPSILON&&Math.abs(p-A)<V.EPSILON?At(e):(i=v-b,o=_-x,h=p-A,d=1/Math.hypot(i,o,h),i*=d,o*=d,h*=d,a=y*h-M*o,s=M*i-m*h,c=m*o-y*i,d=Math.hypot(a,s,c),d?(d=1/d,a*=d,s*=d,c*=d):(a=0,s=0,c=0),l=o*c-h*s,f=h*a-i*c,u=i*s-o*a,d=Math.hypot(l,f,u),d?(d=1/d,l*=d,f*=d,u*=d):(l=0,f=0,u=0),e[0]=a,e[1]=l,e[2]=i,e[3]=0,e[4]=s,e[5]=f,e[6]=o,e[7]=0,e[8]=c,e[9]=u,e[10]=h,e[11]=0,e[12]=-(a*v+s*_+c*p),e[13]=-(l*v+f*_+u*p),e[14]=-(i*v+o*_+h*p),e[15]=1,e)}function Ja(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=n[0],f=n[1],u=n[2],i=a-r[0],o=s-r[1],h=c-r[2],d=i*i+o*o+h*h;d>0&&(d=1/Math.sqrt(d),i*=d,o*=d,h*=d);var v=f*h-u*o,_=u*i-l*h,p=l*o-f*i;return d=v*v+_*_+p*p,d>0&&(d=1/Math.sqrt(d),v*=d,_*=d,p*=d),e[0]=v,e[1]=_,e[2]=p,e[3]=0,e[4]=o*p-h*_,e[5]=h*v-i*p,e[6]=i*_-o*v,e[7]=0,e[8]=i,e[9]=o,e[10]=h,e[11]=0,e[12]=a,e[13]=s,e[14]=c,e[15]=1,e}function Ka(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function es(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ts(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function Rt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function rs(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function ns(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function is(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function as(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=e[6],u=e[7],i=e[8],o=e[9],h=e[10],d=e[11],v=e[12],_=e[13],p=e[14],m=e[15],y=t[0],M=t[1],b=t[2],x=t[3],A=t[4],g=t[5],w=t[6],C=t[7],W=t[8],I=t[9],F=t[10],j=t[11],q=t[12],Z=t[13],me=t[14],ye=t[15];return Math.abs(r-y)<=V.EPSILON*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(n-M)<=V.EPSILON*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(a-b)<=V.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(s-x)<=V.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(c-A)<=V.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(l-g)<=V.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-w)<=V.EPSILON*Math.max(1,Math.abs(f),Math.abs(w))&&Math.abs(u-C)<=V.EPSILON*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(i-W)<=V.EPSILON*Math.max(1,Math.abs(i),Math.abs(W))&&Math.abs(o-I)<=V.EPSILON*Math.max(1,Math.abs(o),Math.abs(I))&&Math.abs(h-F)<=V.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(d-j)<=V.EPSILON*Math.max(1,Math.abs(d),Math.abs(j))&&Math.abs(v-q)<=V.EPSILON*Math.max(1,Math.abs(v),Math.abs(q))&&Math.abs(_-Z)<=V.EPSILON*Math.max(1,Math.abs(_),Math.abs(Z))&&Math.abs(p-me)<=V.EPSILON*Math.max(1,Math.abs(p),Math.abs(me))&&Math.abs(m-ye)<=V.EPSILON*Math.max(1,Math.abs(m),Math.abs(ye))}var ss=Tt;O.mul=ss;var os=Rt;O.sub=os});var Be=k(S=>{"use strict";function Ae(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ae=function(r){return typeof r}:Ae=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ae(e)}Object.defineProperty(S,"__esModule",{value:!0});S.create=qt;S.clone=ls;S.length=Et;S.fromValues=fs;S.copy=hs;S.set=us;S.add=ds;S.subtract=Wt;S.multiply=kt;S.divide=Ct;S.ceil=ps;S.floor=vs;S.min=_s;S.max=ms;S.round=ys;S.scale=gs;S.scaleAndAdd=Ms;S.distance=Dt;S.squaredDistance=Ft;S.squaredLength=jt;S.negate=bs;S.inverse=ws;S.normalize=xs;S.dot=zt;S.cross=As;S.lerp=Ts;S.hermite=Ss;S.bezier=Os;S.random=Ls;S.transformMat4=Ps;S.transformMat3=Rs;S.transformQuat=Is;S.rotateX=qs;S.rotateY=Es;S.rotateZ=Ws;S.angle=ks;S.zero=Cs;S.str=Ds;S.exactEquals=Fs;S.equals=js;S.forEach=S.sqrLen=S.len=S.sqrDist=S.dist=S.div=S.mul=S.sub=void 0;var se=cs(ee());function It(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(It=function(a){return a?r:t})(e)}function cs(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Ae(e)!=="object"&&typeof e!="function")return{default:e};var r=It(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function qt(){var e=new se.ARRAY_TYPE(3);return se.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ls(e){var t=new se.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Et(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function fs(e,t,r){var n=new se.ARRAY_TYPE(3);return n[0]=e,n[1]=t,n[2]=r,n}function hs(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function us(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function ds(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function Wt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function kt(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Ct(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function ps(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function vs(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function _s(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function ms(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function ys(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function gs(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function Ms(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function Dt(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.hypot(r,n,a)}function Ft(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function jt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function bs(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ws(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function xs(e,t){var r=t[0],n=t[1],a=t[2],s=r*r+n*n+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function zt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function As(e,t,r){var n=t[0],a=t[1],s=t[2],c=r[0],l=r[1],f=r[2];return e[0]=a*f-s*l,e[1]=s*c-n*f,e[2]=n*l-a*c,e}function Ts(e,t,r,n){var a=t[0],s=t[1],c=t[2];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e[2]=c+n*(r[2]-c),e}function Ss(e,t,r,n,a,s){var c=s*s,l=c*(2*s-3)+1,f=c*(s-2)+s,u=c*(s-1),i=c*(3-2*s);return e[0]=t[0]*l+r[0]*f+n[0]*u+a[0]*i,e[1]=t[1]*l+r[1]*f+n[1]*u+a[1]*i,e[2]=t[2]*l+r[2]*f+n[2]*u+a[2]*i,e}function Os(e,t,r,n,a,s){var c=1-s,l=c*c,f=s*s,u=l*c,i=3*s*l,o=3*f*c,h=f*s;return e[0]=t[0]*u+r[0]*i+n[0]*o+a[0]*h,e[1]=t[1]*u+r[1]*i+n[1]*o+a[1]*h,e[2]=t[2]*u+r[2]*i+n[2]*o+a[2]*h,e}function Ls(e,t){t=t||1;var r=se.RANDOM()*2*Math.PI,n=se.RANDOM()*2-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e}function Ps(e,t,r){var n=t[0],a=t[1],s=t[2],c=r[3]*n+r[7]*a+r[11]*s+r[15];return c=c||1,e[0]=(r[0]*n+r[4]*a+r[8]*s+r[12])/c,e[1]=(r[1]*n+r[5]*a+r[9]*s+r[13])/c,e[2]=(r[2]*n+r[6]*a+r[10]*s+r[14])/c,e}function Rs(e,t,r){var n=t[0],a=t[1],s=t[2];return e[0]=n*r[0]+a*r[3]+s*r[6],e[1]=n*r[1]+a*r[4]+s*r[7],e[2]=n*r[2]+a*r[5]+s*r[8],e}function Is(e,t,r){var n=r[0],a=r[1],s=r[2],c=r[3],l=t[0],f=t[1],u=t[2],i=a*u-s*f,o=s*l-n*u,h=n*f-a*l,d=a*h-s*o,v=s*i-n*h,_=n*o-a*i,p=c*2;return i*=p,o*=p,h*=p,d*=2,v*=2,_*=2,e[0]=l+i+d,e[1]=f+o+v,e[2]=u+h+_,e}function qs(e,t,r,n){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[0],s[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),s[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Es(e,t,r,n){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),s[1]=a[1],s[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Ws(e,t,r,n){var a=[],s=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],s[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),s[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),s[2]=a[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function ks(e,t){var r=e[0],n=e[1],a=e[2],s=t[0],c=t[1],l=t[2],f=Math.sqrt(r*r+n*n+a*a),u=Math.sqrt(s*s+c*c+l*l),i=f*u,o=i&&zt(e,t)/i;return Math.acos(Math.min(Math.max(o,-1),1))}function Cs(e){return e[0]=0,e[1]=0,e[2]=0,e}function Ds(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Fs(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function js(e,t){var r=e[0],n=e[1],a=e[2],s=t[0],c=t[1],l=t[2];return Math.abs(r-s)<=se.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-c)<=se.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-l)<=se.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))}var zs=Wt;S.sub=zs;var Ns=kt;S.mul=Ns;var Vs=Ct;S.div=Vs;var Ys=Dt;S.dist=Ys;var Hs=Ft;S.sqrDist=Hs;var Bs=Et;S.len=Bs;var Xs=jt;S.sqrLen=Xs;var Gs=function(){var e=qt();return function(t,r,n,a,s,c){var l,f;for(r||(r=3),n||(n=0),a?f=Math.min(a*r+n,t.length):f=t.length,l=n;l<f;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],s(e,e,c),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}();S.forEach=Gs});var Xe=k(P=>{"use strict";function Te(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Te=function(r){return typeof r}:Te=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Te(e)}Object.defineProperty(P,"__esModule",{value:!0});P.create=Vt;P.clone=Qs;P.fromValues=Zs;P.copy=$s;P.set=Js;P.add=Ks;P.subtract=Yt;P.multiply=Ht;P.divide=Bt;P.ceil=eo;P.floor=to;P.min=ro;P.max=no;P.round=io;P.scale=ao;P.scaleAndAdd=so;P.distance=Xt;P.squaredDistance=Gt;P.length=Ut;P.squaredLength=Qt;P.negate=oo;P.inverse=co;P.normalize=lo;P.dot=fo;P.cross=ho;P.lerp=uo;P.random=po;P.transformMat4=vo;P.transformQuat=_o;P.zero=mo;P.str=yo;P.exactEquals=go;P.equals=Mo;P.forEach=P.sqrLen=P.len=P.sqrDist=P.dist=P.div=P.mul=P.sub=void 0;var Q=Us(ee());function Nt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Nt=function(a){return a?r:t})(e)}function Us(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Te(e)!=="object"&&typeof e!="function")return{default:e};var r=Nt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function Vt(){var e=new Q.ARRAY_TYPE(4);return Q.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Qs(e){var t=new Q.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Zs(e,t,r,n){var a=new Q.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a}function $s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Js(e,t,r,n,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e}function Ks(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function Yt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function Ht(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Bt(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function eo(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function to(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function ro(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function no(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function io(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function ao(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function so(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e}function Xt(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],s=t[3]-e[3];return Math.hypot(r,n,a,s)}function Gt(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+a*a+s*s}function Ut(e){var t=e[0],r=e[1],n=e[2],a=e[3];return Math.hypot(t,r,n,a)}function Qt(e){var t=e[0],r=e[1],n=e[2],a=e[3];return t*t+r*r+n*n+a*a}function oo(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function co(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function lo(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r*r+n*n+a*a+s*s;return c>0&&(c=1/Math.sqrt(c)),e[0]=r*c,e[1]=n*c,e[2]=a*c,e[3]=s*c,e}function fo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ho(e,t,r,n){var a=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],c=r[0]*n[3]-r[3]*n[0],l=r[1]*n[2]-r[2]*n[1],f=r[1]*n[3]-r[3]*n[1],u=r[2]*n[3]-r[3]*n[2],i=t[0],o=t[1],h=t[2],d=t[3];return e[0]=o*u-h*f+d*l,e[1]=-(i*u)+h*c-d*s,e[2]=i*f-o*c+d*a,e[3]=-(i*l)+o*s-h*a,e}function uo(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=t[3];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e[2]=c+n*(r[2]-c),e[3]=l+n*(r[3]-l),e}function po(e,t){t=t||1;var r,n,a,s,c,l;do r=Q.RANDOM()*2-1,n=Q.RANDOM()*2-1,c=r*r+n*n;while(c>=1);do a=Q.RANDOM()*2-1,s=Q.RANDOM()*2-1,l=a*a+s*s;while(l>=1);var f=Math.sqrt((1-c)/l);return e[0]=t*r,e[1]=t*n,e[2]=t*a*f,e[3]=t*s*f,e}function vo(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*s+r[12]*c,e[1]=r[1]*n+r[5]*a+r[9]*s+r[13]*c,e[2]=r[2]*n+r[6]*a+r[10]*s+r[14]*c,e[3]=r[3]*n+r[7]*a+r[11]*s+r[15]*c,e}function _o(e,t,r){var n=t[0],a=t[1],s=t[2],c=r[0],l=r[1],f=r[2],u=r[3],i=u*n+l*s-f*a,o=u*a+f*n-c*s,h=u*s+c*a-l*n,d=-c*n-l*a-f*s;return e[0]=i*u+d*-c+o*-f-h*-l,e[1]=o*u+d*-l+h*-c-i*-f,e[2]=h*u+d*-f+i*-l-o*-c,e[3]=t[3],e}function mo(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function yo(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function go(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function Mo(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=t[0],l=t[1],f=t[2],u=t[3];return Math.abs(r-c)<=Q.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-l)<=Q.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-f)<=Q.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-u)<=Q.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))}var bo=Yt;P.sub=bo;var wo=Ht;P.mul=wo;var xo=Bt;P.div=xo;var Ao=Xt;P.dist=Ao;var To=Gt;P.sqrDist=To;var So=Ut;P.len=So;var Oo=Qt;P.sqrLen=Oo;var Lo=function(){var e=Vt();return function(t,r,n,a,s,c){var l,f;for(r||(r=4),n||(n=0),a?f=Math.min(a*r+n,t.length):f=t.length,l=n;l<f;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],s(e,e,c),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}}();P.forEach=Lo});var Qe=k(T=>{"use strict";function Se(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Se=function(r){return typeof r}:Se=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Se(e)}Object.defineProperty(T,"__esModule",{value:!0});T.create=Ge;T.identity=Ro;T.setAxisAngle=$t;T.getAxisAngle=Io;T.getAngle=qo;T.multiply=Jt;T.rotateX=Eo;T.rotateY=Wo;T.rotateZ=ko;T.calculateW=Co;T.exp=Kt;T.ln=er;T.pow=Do;T.slerp=Oe;T.random=Fo;T.invert=jo;T.conjugate=zo;T.fromMat3=tr;T.fromEuler=No;T.str=Vo;T.setAxes=T.sqlerp=T.rotationTo=T.equals=T.exactEquals=T.normalize=T.sqrLen=T.squaredLength=T.len=T.length=T.lerp=T.dot=T.scale=T.mul=T.add=T.set=T.copy=T.fromValues=T.clone=void 0;var ue=Le(ee()),Po=Le(Ye()),oe=Le(Be()),X=Le(Xe());function Zt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Zt=function(a){return a?r:t})(e)}function Le(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Se(e)!=="object"&&typeof e!="function")return{default:e};var r=Zt(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function Ge(){var e=new ue.ARRAY_TYPE(4);return ue.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ro(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function $t(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function Io(e,t){var r=Math.acos(t[3])*2,n=Math.sin(r/2);return n>ue.EPSILON?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function qo(e,t){var r=nr(e,t);return Math.acos(2*r*r-1)}function Jt(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1],u=r[2],i=r[3];return e[0]=n*i+c*l+a*u-s*f,e[1]=a*i+c*f+s*l-n*u,e[2]=s*i+c*u+n*f-a*l,e[3]=c*i-n*l-a*f-s*u,e}function Eo(e,t,r){r*=.5;var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+c*l,e[1]=a*f+s*l,e[2]=s*f-a*l,e[3]=c*f-n*l,e}function Wo(e,t,r){r*=.5;var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f-s*l,e[1]=a*f+c*l,e[2]=s*f+n*l,e[3]=c*f-a*l,e}function ko(e,t,r){r*=.5;var n=t[0],a=t[1],s=t[2],c=t[3],l=Math.sin(r),f=Math.cos(r);return e[0]=n*f+a*l,e[1]=a*f-n*l,e[2]=s*f+c*l,e[3]=c*f-s*l,e}function Co(e,t){var r=t[0],n=t[1],a=t[2];return e[0]=r,e[1]=n,e[2]=a,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),e}function Kt(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=Math.sqrt(r*r+n*n+a*a),l=Math.exp(s),f=c>0?l*Math.sin(c)/c:0;return e[0]=r*f,e[1]=n*f,e[2]=a*f,e[3]=l*Math.cos(c),e}function er(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=Math.sqrt(r*r+n*n+a*a),l=c>0?Math.atan2(c,s)/c:0;return e[0]=r*l,e[1]=n*l,e[2]=a*l,e[3]=.5*Math.log(r*r+n*n+a*a+s*s),e}function Do(e,t,r){return er(e,t),rr(e,e,r),Kt(e,e),e}function Oe(e,t,r,n){var a=t[0],s=t[1],c=t[2],l=t[3],f=r[0],u=r[1],i=r[2],o=r[3],h,d,v,_,p;return d=a*f+s*u+c*i+l*o,d<0&&(d=-d,f=-f,u=-u,i=-i,o=-o),1-d>ue.EPSILON?(h=Math.acos(d),v=Math.sin(h),_=Math.sin((1-n)*h)/v,p=Math.sin(n*h)/v):(_=1-n,p=n),e[0]=_*a+p*f,e[1]=_*s+p*u,e[2]=_*c+p*i,e[3]=_*l+p*o,e}function Fo(e){var t=ue.RANDOM(),r=ue.RANDOM(),n=ue.RANDOM(),a=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*r),e[1]=a*Math.cos(2*Math.PI*r),e[2]=s*Math.sin(2*Math.PI*n),e[3]=s*Math.cos(2*Math.PI*n),e}function jo(e,t){var r=t[0],n=t[1],a=t[2],s=t[3],c=r*r+n*n+a*a+s*s,l=c?1/c:0;return e[0]=-r*l,e[1]=-n*l,e[2]=-a*l,e[3]=s*l,e}function zo(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function tr(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[a*3+a]&&(a=2);var s=(a+1)%3,c=(a+2)%3;n=Math.sqrt(t[a*3+a]-t[s*3+s]-t[c*3+c]+1),e[a]=.5*n,n=.5/n,e[3]=(t[s*3+c]-t[c*3+s])*n,e[s]=(t[s*3+a]+t[a*3+s])*n,e[c]=(t[c*3+a]+t[a*3+c])*n}return e}function No(e,t,r,n){var a=.5*Math.PI/180;t*=a,r*=a,n*=a;var s=Math.sin(t),c=Math.cos(t),l=Math.sin(r),f=Math.cos(r),u=Math.sin(n),i=Math.cos(n);return e[0]=s*f*i-c*l*u,e[1]=c*l*i+s*f*u,e[2]=c*f*u-s*l*i,e[3]=c*f*i+s*l*u,e}function Vo(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Yo=X.clone;T.clone=Yo;var Ho=X.fromValues;T.fromValues=Ho;var Bo=X.copy;T.copy=Bo;var Xo=X.set;T.set=Xo;var Go=X.add;T.add=Go;var Uo=Jt;T.mul=Uo;var rr=X.scale;T.scale=rr;var nr=X.dot;T.dot=nr;var Qo=X.lerp;T.lerp=Qo;var ir=X.length;T.length=ir;var Zo=ir;T.len=Zo;var ar=X.squaredLength;T.squaredLength=ar;var $o=ar;T.sqrLen=$o;var Ue=X.normalize;T.normalize=Ue;var Jo=X.exactEquals;T.exactEquals=Jo;var Ko=X.equals;T.equals=Ko;var ec=function(){var e=oe.create(),t=oe.fromValues(1,0,0),r=oe.fromValues(0,1,0);return function(n,a,s){var c=oe.dot(a,s);return c<-.999999?(oe.cross(e,t,a),oe.len(e)<1e-6&&oe.cross(e,r,a),oe.normalize(e,e),$t(n,e,Math.PI),n):c>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(oe.cross(e,a,s),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+c,Ue(n,n))}}();T.rotationTo=ec;var tc=function(){var e=Ge(),t=Ge();return function(r,n,a,s,c,l){return Oe(e,n,c,l),Oe(t,a,s,l),Oe(r,e,t,2*l*(1-l)),r}}();T.sqlerp=tc;var rc=function(){var e=Po.create();return function(t,r,n,a){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],Ue(t,tr(t,e))}}();T.setAxes=rc});var dr=k(R=>{"use strict";function Pe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pe=function(r){return typeof r}:Pe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pe(e)}Object.defineProperty(R,"__esModule",{value:!0});R.create=nc;R.clone=ic;R.fromValues=ac;R.fromRotationTranslationValues=sc;R.fromRotationTranslation=cr;R.fromTranslation=oc;R.fromRotation=cc;R.fromMat4=lc;R.copy=lr;R.identity=fc;R.set=hc;R.getDual=dc;R.setDual=vc;R.getTranslation=_c;R.translate=mc;R.rotateX=yc;R.rotateY=gc;R.rotateZ=Mc;R.rotateByQuatAppend=bc;R.rotateByQuatPrepend=wc;R.rotateAroundAxis=xc;R.add=Ac;R.multiply=fr;R.scale=Sc;R.lerp=Oc;R.invert=Lc;R.conjugate=Pc;R.normalize=qc;R.str=Ec;R.exactEquals=Wc;R.equals=kc;R.sqrLen=R.squaredLength=R.len=R.length=R.dot=R.mul=R.setReal=R.getReal=void 0;var H=Ze(ee()),ce=Ze(Qe()),sr=Ze(He());function or(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(or=function(a){return a?r:t})(e)}function Ze(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Pe(e)!=="object"&&typeof e!="function")return{default:e};var r=or(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function nc(){var e=new H.ARRAY_TYPE(8);return H.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function ic(e){var t=new H.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function ac(e,t,r,n,a,s,c,l){var f=new H.ARRAY_TYPE(8);return f[0]=e,f[1]=t,f[2]=r,f[3]=n,f[4]=a,f[5]=s,f[6]=c,f[7]=l,f}function sc(e,t,r,n,a,s,c){var l=new H.ARRAY_TYPE(8);l[0]=e,l[1]=t,l[2]=r,l[3]=n;var f=a*.5,u=s*.5,i=c*.5;return l[4]=f*n+u*r-i*t,l[5]=u*n+i*e-f*r,l[6]=i*n+f*t-u*e,l[7]=-f*e-u*t-i*r,l}function cr(e,t,r){var n=r[0]*.5,a=r[1]*.5,s=r[2]*.5,c=t[0],l=t[1],f=t[2],u=t[3];return e[0]=c,e[1]=l,e[2]=f,e[3]=u,e[4]=n*u+a*f-s*l,e[5]=a*u+s*c-n*f,e[6]=s*u+n*l-a*c,e[7]=-n*c-a*l-s*f,e}function oc(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function cc(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function lc(e,t){var r=ce.create();sr.getRotation(r,t);var n=new H.ARRAY_TYPE(3);return sr.getTranslation(n,t),cr(e,r,n),e}function lr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function fc(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function hc(e,t,r,n,a,s,c,l,f){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=f,e}var uc=ce.copy;R.getReal=uc;function dc(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var pc=ce.copy;R.setReal=pc;function vc(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function _c(e,t){var r=t[4],n=t[5],a=t[6],s=t[7],c=-t[0],l=-t[1],f=-t[2],u=t[3];return e[0]=(r*u+s*c+n*f-a*l)*2,e[1]=(n*u+s*l+a*c-r*f)*2,e[2]=(a*u+s*f+r*l-n*c)*2,e}function mc(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0]*.5,f=r[1]*.5,u=r[2]*.5,i=t[4],o=t[5],h=t[6],d=t[7];return e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=c*l+a*u-s*f+i,e[5]=c*f+s*l-n*u+o,e[6]=c*u+n*f-a*l+h,e[7]=-n*l-a*f-s*u+d,e}function yc(e,t,r){var n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=l*c+i*n+f*s-u*a,h=f*c+i*a+u*n-l*s,d=u*c+i*s+l*a-f*n,v=i*c-l*n-f*a-u*s;return ce.rotateX(e,t,r),n=e[0],a=e[1],s=e[2],c=e[3],e[4]=o*c+v*n+h*s-d*a,e[5]=h*c+v*a+d*n-o*s,e[6]=d*c+v*s+o*a-h*n,e[7]=v*c-o*n-h*a-d*s,e}function gc(e,t,r){var n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=l*c+i*n+f*s-u*a,h=f*c+i*a+u*n-l*s,d=u*c+i*s+l*a-f*n,v=i*c-l*n-f*a-u*s;return ce.rotateY(e,t,r),n=e[0],a=e[1],s=e[2],c=e[3],e[4]=o*c+v*n+h*s-d*a,e[5]=h*c+v*a+d*n-o*s,e[6]=d*c+v*s+o*a-h*n,e[7]=v*c-o*n-h*a-d*s,e}function Mc(e,t,r){var n=-t[0],a=-t[1],s=-t[2],c=t[3],l=t[4],f=t[5],u=t[6],i=t[7],o=l*c+i*n+f*s-u*a,h=f*c+i*a+u*n-l*s,d=u*c+i*s+l*a-f*n,v=i*c-l*n-f*a-u*s;return ce.rotateZ(e,t,r),n=e[0],a=e[1],s=e[2],c=e[3],e[4]=o*c+v*n+h*s-d*a,e[5]=h*c+v*a+d*n-o*s,e[6]=d*c+v*s+o*a-h*n,e[7]=v*c-o*n-h*a-d*s,e}function bc(e,t,r){var n=r[0],a=r[1],s=r[2],c=r[3],l=t[0],f=t[1],u=t[2],i=t[3];return e[0]=l*c+i*n+f*s-u*a,e[1]=f*c+i*a+u*n-l*s,e[2]=u*c+i*s+l*a-f*n,e[3]=i*c-l*n-f*a-u*s,l=t[4],f=t[5],u=t[6],i=t[7],e[4]=l*c+i*n+f*s-u*a,e[5]=f*c+i*a+u*n-l*s,e[6]=u*c+i*s+l*a-f*n,e[7]=i*c-l*n-f*a-u*s,e}function wc(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[0],f=r[1],u=r[2],i=r[3];return e[0]=n*i+c*l+a*u-s*f,e[1]=a*i+c*f+s*l-n*u,e[2]=s*i+c*u+n*f-a*l,e[3]=c*i-n*l-a*f-s*u,l=r[4],f=r[5],u=r[6],i=r[7],e[4]=n*i+c*l+a*u-s*f,e[5]=a*i+c*f+s*l-n*u,e[6]=s*i+c*u+n*f-a*l,e[7]=c*i-n*l-a*f-s*u,e}function xc(e,t,r,n){if(Math.abs(n)<H.EPSILON)return lr(e,t);var a=Math.hypot(r[0],r[1],r[2]);n=n*.5;var s=Math.sin(n),c=s*r[0]/a,l=s*r[1]/a,f=s*r[2]/a,u=Math.cos(n),i=t[0],o=t[1],h=t[2],d=t[3];e[0]=i*u+d*c+o*f-h*l,e[1]=o*u+d*l+h*c-i*f,e[2]=h*u+d*f+i*l-o*c,e[3]=d*u-i*c-o*l-h*f;var v=t[4],_=t[5],p=t[6],m=t[7];return e[4]=v*u+m*c+_*f-p*l,e[5]=_*u+m*l+p*c-v*f,e[6]=p*u+m*f+v*l-_*c,e[7]=m*u-v*c-_*l-p*f,e}function Ac(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e}function fr(e,t,r){var n=t[0],a=t[1],s=t[2],c=t[3],l=r[4],f=r[5],u=r[6],i=r[7],o=t[4],h=t[5],d=t[6],v=t[7],_=r[0],p=r[1],m=r[2],y=r[3];return e[0]=n*y+c*_+a*m-s*p,e[1]=a*y+c*p+s*_-n*m,e[2]=s*y+c*m+n*p-a*_,e[3]=c*y-n*_-a*p-s*m,e[4]=n*i+c*l+a*u-s*f+o*y+v*_+h*m-d*p,e[5]=a*i+c*f+s*l-n*u+h*y+v*p+d*_-o*m,e[6]=s*i+c*u+n*f-a*l+d*y+v*m+o*p-h*_,e[7]=c*i-n*l-a*f-s*u+v*y-o*_-h*p-d*m,e}var Tc=fr;R.mul=Tc;function Sc(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e}var hr=ce.dot;R.dot=hr;function Oc(e,t,r,n){var a=1-n;return hr(t,r)<0&&(n=-n),e[0]=t[0]*a+r[0]*n,e[1]=t[1]*a+r[1]*n,e[2]=t[2]*a+r[2]*n,e[3]=t[3]*a+r[3]*n,e[4]=t[4]*a+r[4]*n,e[5]=t[5]*a+r[5]*n,e[6]=t[6]*a+r[6]*n,e[7]=t[7]*a+r[7]*n,e}function Lc(e,t){var r=Re(t);return e[0]=-t[0]/r,e[1]=-t[1]/r,e[2]=-t[2]/r,e[3]=t[3]/r,e[4]=-t[4]/r,e[5]=-t[5]/r,e[6]=-t[6]/r,e[7]=t[7]/r,e}function Pc(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var ur=ce.length;R.length=ur;var Rc=ur;R.len=Rc;var Re=ce.squaredLength;R.squaredLength=Re;var Ic=Re;R.sqrLen=Ic;function qc(e,t){var r=Re(t);if(r>0){r=Math.sqrt(r);var n=t[0]/r,a=t[1]/r,s=t[2]/r,c=t[3]/r,l=t[4],f=t[5],u=t[6],i=t[7],o=n*l+a*f+s*u+c*i;e[0]=n,e[1]=a,e[2]=s,e[3]=c,e[4]=(l-n*o)/r,e[5]=(f-a*o)/r,e[6]=(u-s*o)/r,e[7]=(i-c*o)/r}return e}function Ec(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Wc(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function kc(e,t){var r=e[0],n=e[1],a=e[2],s=e[3],c=e[4],l=e[5],f=e[6],u=e[7],i=t[0],o=t[1],h=t[2],d=t[3],v=t[4],_=t[5],p=t[6],m=t[7];return Math.abs(r-i)<=H.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-o)<=H.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-h)<=H.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=H.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(c-v)<=H.EPSILON*Math.max(1,Math.abs(c),Math.abs(v))&&Math.abs(l-_)<=H.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-p)<=H.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(u-m)<=H.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))}});var xr=k(L=>{"use strict";function Ie(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ie=function(r){return typeof r}:Ie=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ie(e)}Object.defineProperty(L,"__esModule",{value:!0});L.create=vr;L.clone=Dc;L.fromValues=Fc;L.copy=jc;L.set=zc;L.add=Nc;L.subtract=_r;L.multiply=mr;L.divide=yr;L.ceil=Vc;L.floor=Yc;L.min=Hc;L.max=Bc;L.round=Xc;L.scale=Gc;L.scaleAndAdd=Uc;L.distance=gr;L.squaredDistance=Mr;L.length=br;L.squaredLength=wr;L.negate=Qc;L.inverse=Zc;L.normalize=$c;L.dot=Jc;L.cross=Kc;L.lerp=el;L.random=tl;L.transformMat2=rl;L.transformMat2d=nl;L.transformMat3=il;L.transformMat4=al;L.rotate=sl;L.angle=ol;L.zero=cl;L.str=ll;L.exactEquals=fl;L.equals=hl;L.forEach=L.sqrLen=L.sqrDist=L.dist=L.div=L.mul=L.sub=L.len=void 0;var de=Cc(ee());function pr(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(pr=function(a){return a?r:t})(e)}function Cc(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Ie(e)!=="object"&&typeof e!="function")return{default:e};var r=pr(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}function vr(){var e=new de.ARRAY_TYPE(2);return de.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function Dc(e){var t=new de.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function Fc(e,t){var r=new de.ARRAY_TYPE(2);return r[0]=e,r[1]=t,r}function jc(e,t){return e[0]=t[0],e[1]=t[1],e}function zc(e,t,r){return e[0]=t,e[1]=r,e}function Nc(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function _r(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function mr(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function yr(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function Vc(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Yc(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Hc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Bc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function Xc(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function Gc(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Uc(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e}function gr(e,t){var r=t[0]-e[0],n=t[1]-e[1];return Math.hypot(r,n)}function Mr(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function br(e){var t=e[0],r=e[1];return Math.hypot(t,r)}function wr(e){var t=e[0],r=e[1];return t*t+r*r}function Qc(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Zc(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function $c(e,t){var r=t[0],n=t[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function Jc(e,t){return e[0]*t[0]+e[1]*t[1]}function Kc(e,t,r){var n=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=n,e}function el(e,t,r,n){var a=t[0],s=t[1];return e[0]=a+n*(r[0]-a),e[1]=s+n*(r[1]-s),e}function tl(e,t){t=t||1;var r=de.RANDOM()*2*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function rl(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a,e[1]=r[1]*n+r[3]*a,e}function nl(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[2]*a+r[4],e[1]=r[1]*n+r[3]*a+r[5],e}function il(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[3]*a+r[6],e[1]=r[1]*n+r[4]*a+r[7],e}function al(e,t,r){var n=t[0],a=t[1];return e[0]=r[0]*n+r[4]*a+r[12],e[1]=r[1]*n+r[5]*a+r[13],e}function sl(e,t,r,n){var a=t[0]-r[0],s=t[1]-r[1],c=Math.sin(n),l=Math.cos(n);return e[0]=a*l-s*c+r[0],e[1]=a*c+s*l+r[1],e}function ol(e,t){var r=e[0],n=e[1],a=t[0],s=t[1],c=Math.sqrt(r*r+n*n)*Math.sqrt(a*a+s*s),l=c&&(r*a+n*s)/c;return Math.acos(Math.min(Math.max(l,-1),1))}function cl(e){return e[0]=0,e[1]=0,e}function ll(e){return"vec2("+e[0]+", "+e[1]+")"}function fl(e,t){return e[0]===t[0]&&e[1]===t[1]}function hl(e,t){var r=e[0],n=e[1],a=t[0],s=t[1];return Math.abs(r-a)<=de.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=de.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))}var ul=br;L.len=ul;var dl=_r;L.sub=dl;var pl=mr;L.mul=pl;var vl=yr;L.div=vl;var _l=gr;L.dist=_l;var ml=Mr;L.sqrDist=ml;var yl=wr;L.sqrLen=yl;var gl=function(){var e=vr();return function(t,r,n,a,s,c){var l,f;for(r||(r=2),n||(n=0),a?f=Math.min(a*r+n,t.length):f=t.length,l=n;l<f;l+=r)e[0]=t[l],e[1]=t[l+1],s(e,e,c),t[l]=e[0],t[l+1]=e[1];return t}}();L.forEach=gl});var ne=k(Y=>{"use strict";function qe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qe=function(r){return typeof r}:qe=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},qe(e)}Object.defineProperty(Y,"__esModule",{value:!0});Y.vec4=Y.vec3=Y.vec2=Y.quat2=Y.quat=Y.mat4=Y.mat3=Y.mat2d=Y.mat2=Y.glMatrix=void 0;var Ml=re(ee());Y.glMatrix=Ml;var bl=re(vt());Y.mat2=bl;var wl=re(gt());Y.mat2d=wl;var xl=re(Ye());Y.mat3=xl;var Al=re(He());Y.mat4=Al;var Tl=re(Qe());Y.quat=Tl;var Sl=re(dr());Y.quat2=Sl;var Ol=re(xr());Y.vec2=Ol;var Ll=re(Be());Y.vec3=Ll;var Pl=re(Xe());Y.vec4=Pl;function Ar(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(Ar=function(a){return a?r:t})(e)}function re(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||qe(e)!=="object"&&typeof e!="function")return{default:e};var r=Ar(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(n,s,c):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}});var Tr=k(()=>{WL.registerComponent("8thwall-camera",{camera:{type:WL.Type.Enum,values:["auto","back","front"],default:"auto"}},{name:"wonderland-engine",init:function(){this.position=[0,0,0,0],this.rotation=[0,0,0,0],this.started=!1;let e=["auto","back","front"];this.camera=e[this.camera],this.camera=="auto"&&(this.camera="back"),this.onStart=this.onStart.bind(this),this.onUpdate=this.onUpdate.bind(this),XR8.addCameraPipelineModules([XR8.GlTextureRenderer.pipelineModule(),XR8.XrController.pipelineModule(),this]),this.camera=="back"?XR8.run({canvas:Module.canvas,ownRunLoop:!1}):this.camera=="back"?(XR8.XrController.configure({disableWorldTracking:!0}),XR8.run({canvas:Module.canvas,ownRunLoop:!1,cameraConfig:{direction:XR8.XrConfig.camera().FRONT}})):console.error("[8thwall-camera] Invalid camera setting:",this.camera)},update:function(){if(this.started){if(WL.scene.onPostRender.length==0&&(WL.scene.onPreRender.push(function(){XR8.runPreRender(Date.now()),_wl_reset_context()}),WL.scene.onPostRender.push(function(){XR8.runPostRender(Date.now())})),this.rotation[0]==0&&this.rotation[1]==0&&this.rotation[2]==0&&this.rotation[3]==0)return;this.object.resetTransform(),this.object.rotate(this.rotation),this.object.translate(this.position)}},onUpdate:function(e){if(!e.processCpuResult.reality)return;let t=e.processCpuResult.reality.rotation;this.rotation[0]=t.x,this.rotation[1]=t.y,this.rotation[2]=t.z,this.rotation[3]=t.w;let r=e.processCpuResult.reality.position;this.position[0]=r.x,this.position[1]=r.y,this.position[2]=r.z},onStart:function(){this.started=!0}})});var Sr=k(()=>{WL.registerComponent("cursor-target",{},{init:function(){this.hoverFunctions=[],this.unHoverFunctions=[],this.clickFunctions=[],this.moveFunctions=[],this.downFunctions=[],this.upFunctions=[]},onHover:function(e,t){for(let r of this.hoverFunctions)r(e,t)},onUnhover:function(e,t){for(let r of this.unHoverFunctions)r(e,t)},onClick:function(e,t){for(let r of this.clickFunctions)r(e,t)},onMove:function(e,t){for(let r of this.moveFunctions)r(e,t)},onDown:function(e,t){for(let r of this.downFunctions)r(e,t)},onUp:function(e,t){for(let r of this.upFunctions)r(e,t)},addHoverFunction:function(e){this._validateCallback(e),this.hoverFunctions.push(e)},removeHoverFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.hoverFunctions,e)},addUnHoverFunction:function(e){this._validateCallback(e),this.unHoverFunctions.push(e)},removeUnHoverFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.unHoverFunctions,e)},addClickFunction:function(e){this._validateCallback(e),this.clickFunctions.push(e)},removeClickFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.clickFunctions,e)},addMoveFunction:function(e){this._validateCallback(e),this.moveFunctions.push(e)},removeMoveFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.moveFunctions,e)},addDownFunction:function(e){this._validateCallback(e),this.downFunctions.push(e)},removeDownFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.downFunctions,e)},addUpFunction:function(e){this._validateCallback(e),this.upFunctions.push(e)},removeUpFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.upFunctions,e)},_removeItemOnce:function(e,t){var r=e.indexOf(t);return r>-1&&e.splice(r,1),e},_validateCallback:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function")}})});var Rl={};var he,Or=$(()=>{he=J(ne());WL.registerComponent("cursor",{collisionGroup:{type:WL.Type.Int,default:1},cursorRayObject:{type:WL.Type.Object},cursorRayScalingAxis:{type:WL.Type.Enum,values:["x","y","z","none"],default:"z"},cursorObject:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},styleCursor:{type:WL.Type.Bool,default:!0}},{init:function(){this.session=null,this.collisionMask=1<<this.collisionGroup,this.maxDistance=100;let e=this.onDestroy.bind(this);WL.onSceneLoaded.push(e),this.onDestroyCallbacks=[()=>{let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)}]},start:function(){if(this.handedness==0){let t=this.object.getComponent("input");t?(this.handedness=t.handedness,this.input=t):console.warn("cursor component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];if(this.globalTarget=this.object.addComponent("cursor-target"),this.origin=new Float32Array(3),this.cursorObjScale=new Float32Array(3),this.direction=[0,0,0],this.tempQuat=new Float32Array(4),this.viewComponent=this.object.getComponent("view"),this.viewComponent!=null){let t=this.onClick.bind(this);WL.canvas.addEventListener("click",t);let r=this.onPointerMove.bind(this);WL.canvas.addEventListener("pointermove",r);let n=this.onPointerDown.bind(this);WL.canvas.addEventListener("pointerdown",n);let a=this.onPointerUp.bind(this);WL.canvas.addEventListener("pointerup",a),this.projectionMatrix=new Float32Array(16),he.mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix);let s=this.onViewportResize.bind(this);window.addEventListener("resize",s),this.onDestroyCallbacks.push(()=>{WL.canvas.removeEventListener("click",t),WL.canvas.removeEventListener("pointermove",r),WL.canvas.removeEventListener("pointerdown",n),WL.canvas.removeEventListener("pointerup",a),window.removeEventListener("resize",s)})}this.isHovering=!1,this.visible=!0,this.isDown=!1,this.lastIsDown=!1,this.cursorPos=new Float32Array(3),this.hoveringObject=null;let e=this.setupVREvents.bind(this);WL.onXRSessionStart.push(e),this.onDestroyCallbacks.push(()=>{let t=WL.onXRSessionStart.indexOf(e);t>=0&&WL.onXRSessionStart.splice(t,1)}),this.cursorRayObject&&(this.cursorRayScale=new Float32Array(3),this.cursorRayScale.set(this.cursorRayObject.scalingLocal),this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction),this._setCursorRayTransform([this.origin[0]+this.direction[0],this.origin[1]+this.direction[1],this.origin[2]+this.direction[2]]))},onViewportResize:function(){!this.viewComponent||he.mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix)},_setCursorRayTransform:function(e){if(!this.cursorRayObject)return;let t=he.vec3.dist(this.origin,e);this.cursorRayObject.setTranslationLocal([0,0,-t/2]),this.cursorRayScalingAxis!=4&&(this.cursorRayObject.resetScaling(),this.cursorRayScale[this.cursorRayScalingAxis]=t/2,this.cursorRayObject.scale(this.cursorRayScale))},_setCursorVisibility:function(e){this.visible!=e&&(this.visible=e,this.cursorObject&&(e?(this.cursorObject.resetScaling(),this.cursorObject.scale(this.cursorObjScale)):(this.cursorObjScale.set(this.cursorObject.scalingLocal),this.cursorObject.scale([0,0,0]))))},update:function(){this.doUpdate(!1)},doUpdate:function(e){if(this.session){if(this.arTouchDown&&this.input&&WL.xrSession.inputSources[0].handedness==="none"&&WL.xrSession.inputSources[0].gamepad){let r=WL.xrSession.inputSources[0].gamepad.axes;this.direction=[r[0],-r[1],-1],this.updateDirection()}else this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction);let t=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);t.hitCount>0?this.cursorPos.set(t.locations[0]):this.cursorPos.fill(0),this.hoverBehaviour(t,e)}this.cursorObject&&(this.hoveringObject&&(this.cursorPos[0]!=0||this.cursorPos[1]!=0||this.cursorPos[2]!=0)?(this._setCursorVisibility(!0),this.cursorObject.setTranslationWorld(this.cursorPos),this._setCursorRayTransform(this.cursorPos)):this._setCursorVisibility(!1))},hoverBehaviour:function(e,t){if(e.hitCount>0){if(!this.hoveringObject||!this.hoveringObject.equals(e.objects[0])){if(this.hoveringObject){let a=this.hoveringObject.getComponent("cursor-target");a&&a.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.hoveringObject=e.objects[0],this.styleCursor&&(WL.canvas.style.cursor="pointer");let n=this.hoveringObject.getComponent("cursor-target");n&&(this.hoveringObjectTarget=n,n.onHover(this.hoveringObject,this)),this.globalTarget.onHover(this.hoveringObject,this)}this.hoveringObjectTarget&&this.hoveringObjectTarget.onMove(this.hoveringObject,this);let r=this.hoveringObject.getComponent("cursor-target");this.isDown!==this.lastIsDown&&(this.isDown?(r&&r.onDown(this.hoveringObject,this),this.globalTarget.onDown(this.hoveringObject,this)):(r&&r.onUp(this.hoveringObject,this),this.globalTarget.onUp(this.hoveringObject,this))),t&&(r&&r.onClick(this.hoveringObject,this),this.globalTarget.onClick(this.hoveringObject,this))}else if(this.hoveringObject&&e.hitCount==0){let r=this.hoveringObject.getComponent("cursor-target");r&&r.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this),this.hoveringObject=null,this.hoveringObjectTarget=null,this.styleCursor&&(WL.canvas.style.cursor="default")}this.lastIsDown=this.isDown},setupVREvents:function(e){this.session=e;let t=function(s){this.session=null}.bind(this);e.addEventListener("end",t);let r=this.onSelect.bind(this);e.addEventListener("select",r);let n=this.onSelectStart.bind(this);e.addEventListener("selectstart",n);let a=this.onSelectEnd.bind(this);e.addEventListener("selectend",a),this.onDestroyCallbacks.push(()=>{!this.session||(e.removeEventListener("end",t),e.removeEventListener("select",r),e.removeEventListener("selectstart",n),e.removeEventListener("selectend",a))}),this.onViewportResize()},onSelect:function(e){e.inputSource.handedness==this.handedness&&this.doUpdate(!0)},onSelectStart:function(e){this.arTouchDown=!0,e.inputSource.handedness==this.handedness&&(this.isDown=!0)},onSelectEnd:function(e){this.arTouchDown=!1,e.inputSource.handedness==this.handedness&&(this.isDown=!1)},onPointerMove:function(e){if(!e.isPrimary)return;let t=e.target.getBoundingClientRect(),r=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(r,!1)},onClick:function(e){let t=e.target.getBoundingClientRect(),r=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(r,!0)},onPointerDown:function(e){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),r=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!0,this.hoverBehaviour(r,!1)},onPointerUp:function(e){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),r=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!1,this.hoverBehaviour(r,!1)},updateMousePos:function(e,t,r,n){let a=e/r,s=t/n;return this.direction=[a*2-1,-s*2+1,-1],this.updateDirection()},updateDirection:function(){this.object.getTranslationWorld(this.origin),he.vec3.transformMat4(this.direction,this.direction,this.projectionMatrix),he.vec3.normalize(this.direction,this.direction),he.vec3.transformQuat(this.direction,this.direction,this.object.transformWorld);let e=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);return e.hitCount>0?this.cursorPos.set(e.locations[0]):this.cursorPos.fill(0),e},onDeactivate:function(){if(this._setCursorVisibility(!1),this.hoveringObject){let e=this.hoveringObject.getComponent("cursor-target");e&&e.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.cursorRayObject&&this.cursorRayObject.scale([0,0,0])},onActivate:function(){this._setCursorVisibility(!0)},onDestroy:function(){for(let e of this.onDestroyCallbacks)e()}})});var Lr=k(()=>{WL.registerComponent("debug-object",{obj:{type:WL.Type.Object}},{start:function(){},init:function(){let e=[0,0,0];glMatrix.quat2.getTranslation(e,this.object.transformWorld),console.log("Debug Object:",this.object.name),console.log("Other object:",this.obj.name),console.log("	translation",e),console.log("	transformWorld",this.object.transformWorld),console.log("	transformLocal",this.object.transformLocal)},update:function(){}})});var Pr=k(()=>{function Il(e,t,r,n){let a=Math.cos(t/2),s=Math.cos(r/2),c=Math.cos(n/2),l=Math.sin(t/2),f=Math.sin(r/2),u=Math.sin(n/2);e[0]=l*s*c+a*f*u,e[1]=a*f*c-l*s*u,e[2]=a*s*u-l*f*c,e[3]=a*s*c+l*f*u}WL.registerComponent("device-orientation-look",{},{start:function(){this.rotationX=0,this.rotationY=0,this.lastClientX=-1,this.lastClientY=-1},init:function(){this.deviceOrientation=[0,0,0,1],this.screenOrientation=window.innerHeight>window.innerWidth?0:90,this._origin=[0,0,0],window.addEventListener("deviceorientation",function(e){let t=e.alpha||0,r=e.beta||0,n=e.gamma||0,a=Math.PI/180;Il(this.deviceOrientation,r*a,t*a,-n*a)}.bind(this)),window.addEventListener("orientationchange",function(e){this.screenOrientation=window.orientation||0}.bind(this),!1)},update:function(){Module.webxr_session==null&&(glMatrix.quat2.getTranslation(this._origin,this.object.transformLocal),this.object.resetTransform(),this.screenOrientation!=0&&this.object.rotateAxisAngleDeg([0,0,-1],this.screenOrientation),this.object.rotate([-Math.sqrt(.5),0,0,Math.sqrt(.5)]),this.object.rotate(this.deviceOrientation),this.object.translate(this._origin))}})});var Rr=k(()=>{WL.registerComponent("finger-cursor",{},{init:function(){this.lastTarget=null},start:function(){this.tip=this.object.getComponent("collision")},update:function(){let e=this.tip.queryOverlaps(),t=null;for(let r=0;r<e.length;++r){let n=e[r].object,a=n.getComponent("cursor-target");if(a){a.equals(this.lastTarget)||(a.onHover(n,this),a.onClick(n,this)),t=a;break}}if(t)this.lastTarget=t;else{this.lastTarget&&this.lastTarget.onUnhover(this.lastTarget.object,this),this.lastTarget=null;return}}})});var Ir=k(()=>{WL.registerComponent("fixed-foveation",{fixedFoveation:{type:WL.Type.Float,default:.5}},{start:function(){WL.xrSession?this.setFixedFoveation():WL.onXRSessionStart.push(this.setFixedFoveation.bind(this))},setFixedFoveation:function(){"webxr_baseLayer"in Module&&(Module.webxr_baseLayer.fixedFoveation=this.fixedFoveation)}})});var ql={};var pe,qr=$(()=>{pe=J(ne());WL.registerComponent("hand-tracking",{handedness:{type:WL.Type.Enum,default:"left",values:["left","right"]},jointMesh:{type:WL.Type.Mesh,default:null},jointMaterial:{type:WL.Type.Material,default:null},handSkin:{type:WL.Type.Skin,default:null},deactivateChildrenWithoutPose:{type:WL.Type.Bool,default:!0},controllerToDeactivate:{type:WL.Type.Object}},{ORDERED_JOINTS:["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],init:function(){this.handedness=["left","right"][this.handedness]},start:function(){if(this.joints=[],this.session=null,this.hasPose=!1,this._childrenActive=!0,!("XRHand"in window)){console.warn("WebXR Hand Tracking not supported by this browser."),this.active=!1;return}if(this.handSkin){let t=this.handSkin.jointIds;this.joints[this.ORDERED_JOINTS[0]]=new WL.Object(t[0]);for(let r=0;r<t.length;++r){let n=new WL.Object(t[r]);this.joints[n.name]=n}return}for(let e=0;e<=this.ORDERED_JOINTS.length;++e){let t=WL.scene.addObject(this.object.parent),r=t.addComponent("mesh");r.mesh=this.jointMesh,r.material=this.jointMaterial,this.joints[this.ORDERED_JOINTS[e]]=t}},update:function(e){if(this.session||WL.xrSession&&this.setupVREvents(WL.xrSession),!!this.session){if(this.hasPose=!1,this.session&&this.session.inputSources)for(let t=0;t<=this.session.inputSources.length;++t){let r=this.session.inputSources[t];if(!r||!r.hand||r.handedness!=this.handedness)continue;if(this.hasPose=!0,r.hand.get("wrist")!==null){let s=Module.webxr_frame.getJointPose(r.hand.get("wrist"),WebXR.refSpaces[WebXR.refSpace]);s&&(this.object.resetTranslationRotation(),this.object.transformLocal.set([s.transform.orientation.x,s.transform.orientation.y,s.transform.orientation.z,s.transform.orientation.w]),this.object.translate([s.transform.position.x,s.transform.position.y,s.transform.position.z]))}let n=new Float32Array(3),a=new Float32Array(4);pe.quat.invert(a,this.object.transformLocal),this.object.getTranslationLocal(n);for(let s=0;s<this.ORDERED_JOINTS.length;++s){let c=this.ORDERED_JOINTS[s],l=this.joints[c];if(l==null)continue;let f=null;if(r.hand.get(c)!==null&&(f=Module.webxr_frame.getJointPose(r.hand.get(c),WebXR.refSpaces[WebXR.refSpace])),f!==null)if(this.handSkin)l.resetTranslationRotation(),l.translate([f.transform.position.x-n[0],f.transform.position.y-n[1],f.transform.position.z-n[2]]),l.rotate(a),l.rotateObject([f.transform.orientation.x,f.transform.orientation.y,f.transform.orientation.z,f.transform.orientation.w]);else{l.resetTransform(),l.transformLocal.set([f.transform.orientation.x,f.transform.orientation.y,f.transform.orientation.z,f.transform.orientation.w]),l.translate([f.transform.position.x,f.transform.position.y,f.transform.position.z]);let u=f.radius||.007;l.scale([u,u,u])}else this.handSkin||l.scale([0,0,0])}}!this.hasPose&&this._childrenActive?(this._childrenActive=!1,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!1),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!0,this.setChildrenActive(!0,this.controllerToDeactivate))):this.hasPose&&!this._childrenActive&&(this._childrenActive=!0,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!0),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!1,this.setChildrenActive(!1,this.controllerToDeactivate)))}},setChildrenActive:function(e,t){t=t||this.object;let r=t.children;for(let n of r)n.active=e,this.setChildrenActive(e,n)},isGrabbing:function(){let e=[0,0,0];pe.quat2.getTranslation(e,this.joints["index-finger-tip"].transformLocal);let t=[0,0,0];return pe.quat2.getTranslation(t,this.joints["thumb-tip"].transformLocal),pe.vec3.sqrDist(t,e)<.001},setupVREvents:function(e){this.session=e}})});var El={};var Er,Wr=$(()=>{Er=J(ne());WL.registerComponent("hit-test-location",{},{init:function(){WL.onXRSessionStart.push(this.xrSessionStart.bind(this)),WL.onXRSessionStart.push(this.xrSessionEnd.bind(this)),this.tempScaling=new Float32Array(3),this.tempScaling.set(this.object.scalingLocal),this.visible=!1,this.object.scale([0,0,0])},update:function(e){let t=this.visible;if(this.xrHitTestSource){let r=Module.webxr_frame;if(!r)return;let n=r.getHitTestResults(this.xrHitTestSource);if(n.length>0){let a=n[0].getPose(this.xrViewerSpace);this.visible=!0,Er.quat2.fromMat4(this.object.transformLocal,a.transform.matrix),this.object.setDirty()}else this.visible=!1}this.visible!=t&&(this.visible?(this.object.scalingLocal.set(this.tempScaling),this.object.setDirty()):(this.tempScaling.set(this.object.scalingLocal),this.object.scale([0,0,0])))},xrSessionStart:function(e){e.requestReferenceSpace("viewer").then(function(t){this.xrViewerSpace=t,e.requestHitTestSource({space:this.xrViewerSpace}).then(function(r){this.xrHitTestSource=r}.bind(this)).catch(console.error)}.bind(this)).catch(console.error)},xrSessionEnd:function(){!this.xrHitTestSource||(this.xrHitTestSource.cancel(),this.xrHitTestSource=null)}})});var $e=k(Ee=>{(function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var o=this||t;if(i=parseFloat(i),o.ctx||u(),typeof i<"u"&&i>=0&&i<=1){if(o._volume=i,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var d=o._howls[h]._getSoundIds(),v=0;v<d.length;v++){var _=o._howls[h]._soundById(d[v]);_&&_._node&&(_._node.volume=_._volume*i)}return o}return o._volume},mute:function(i){var o=this||t;o.ctx||u(),o._muted=i,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i?0:o._volume,t.ctx.currentTime);for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var d=o._howls[h]._getSoundIds(),v=0;v<d.length;v++){var _=o._howls[h]._soundById(d[v]);_&&_._node&&(_._node.muted=i?!0:_._muted)}return o},stop:function(){for(var i=this||t,o=0;o<i._howls.length;o++)i._howls[o].stop();return i},unload:function(){for(var i=this||t,o=i._howls.length-1;o>=0;o--)i._howls[o].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,u()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var o=new Audio;o.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return i}if(!o||typeof o.canPlayType!="function")return i;var h=o.canPlayType("audio/mpeg;").replace(/^no$/,""),d=i._navigator?i._navigator.userAgent:"",v=d.match(/OPR\/([0-6].)/g),_=v&&parseInt(v[0].split("/")[1],10)<33,p=d.indexOf("Safari")!==-1&&d.indexOf("Chrome")===-1,m=d.match(/Version\/(.*?) /),y=p&&m&&parseInt(m[1],10)<15;return i._codecs={mp3:!!(!_&&(h||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!h,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!y&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!y&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var o=function(h){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var d=new Audio;d._unlocked=!0,i._releaseHtml5Audio(d)}catch{i.noAudio=!0;break}for(var v=0;v<i._howls.length;v++)if(!i._howls[v]._webAudio)for(var _=i._howls[v]._getSoundIds(),p=0;p<_.length;p++){var m=i._howls[v]._soundById(_[p]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}i._autoResume();var y=i.ctx.createBufferSource();y.buffer=i._scratchBuffer,y.connect(i.ctx.destination),typeof y.start>"u"?y.noteOn(0):y.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),y.onended=function(){y.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var M=0;M<i._howls.length;M++)i._howls[M]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var o=this||t;return i._unlocked&&o._html5AudioPool.push(i),o},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!t.usingWebAudio)){for(var o=0;o<i._howls.length;o++)if(i._howls[o]._webAudio){for(var h=0;h<i._howls[o]._sounds.length;h++)if(!i._howls[o]._sounds[h]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(!!i.autoSuspend){i._suspendTimer=null,i.state="suspending";var d=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(d,d)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var o=0;o<i._howls.length;o++)i._howls[o]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new e,r=function(i){var o=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(i)};r.prototype={init:function(i){var o=this;return t.ctx||u(),o._autoplay=i.autoplay||!1,o._format=typeof i.format!="string"?i.format:[i.format],o._html5=i.html5||!1,o._muted=i.mute||!1,o._loop=i.loop||!1,o._pool=i.pool||5,o._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,o._rate=i.rate||1,o._sprite=i.sprite||{},o._src=typeof i.src!="string"?i.src:[i.src],o._volume=i.volume!==void 0?i.volume:1,o._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=i.onend?[{fn:i.onend}]:[],o._onfade=i.onfade?[{fn:i.onfade}]:[],o._onload=i.onload?[{fn:i.onload}]:[],o._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],o._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],o._onpause=i.onpause?[{fn:i.onpause}]:[],o._onplay=i.onplay?[{fn:i.onplay}]:[],o._onstop=i.onstop?[{fn:i.onstop}]:[],o._onmute=i.onmute?[{fn:i.onmute}]:[],o._onvolume=i.onvolume?[{fn:i.onvolume}]:[],o._onrate=i.onrate?[{fn:i.onrate}]:[],o._onseek=i.onseek?[{fn:i.onseek}]:[],o._onunlock=i.onunlock?[{fn:i.onunlock}]:[],o._onresume=[],o._webAudio=t.usingWebAudio&&!o._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var i=this,o=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var h=0;h<i._src.length;h++){var d,v;if(i._format&&i._format[h])d=i._format[h];else{if(v=i._src[h],typeof v!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}d=/^data:audio\/([^;,]+);/i.exec(v),d||(d=/\.([^.]+)$/.exec(v.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),d&&t.codecs(d)){o=i._src[h];break}}if(!o){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=o,i._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new n(i),i._webAudio&&s(i),i},play:function(i,o){var h=this,d=null;if(typeof i=="number")d=i,i=null;else{if(typeof i=="string"&&h._state==="loaded"&&!h._sprite[i])return null;if(typeof i>"u"&&(i="__default",!h._playLock)){for(var v=0,_=0;_<h._sounds.length;_++)h._sounds[_]._paused&&!h._sounds[_]._ended&&(v++,d=h._sounds[_]._id);v===1?i=null:d=null}}var p=d?h._soundById(d):h._inactiveSound();if(!p)return null;if(d&&!i&&(i=p._sprite||"__default"),h._state!=="loaded"){p._sprite=i,p._ended=!1;var m=p._id;return h._queue.push({event:"play",action:function(){h.play(m)}}),m}if(d&&!p._paused)return o||h._loadQueue("play"),p._id;h._webAudio&&t._autoResume();var y=Math.max(0,p._seek>0?p._seek:h._sprite[i][0]/1e3),M=Math.max(0,(h._sprite[i][0]+h._sprite[i][1])/1e3-y),b=M*1e3/Math.abs(p._rate),x=h._sprite[i][0]/1e3,A=(h._sprite[i][0]+h._sprite[i][1])/1e3;p._sprite=i,p._ended=!1;var g=function(){p._paused=!1,p._seek=y,p._start=x,p._stop=A,p._loop=!!(p._loop||h._sprite[i][2])};if(y>=A){h._ended(p);return}var w=p._node;if(h._webAudio){var C=function(){h._playLock=!1,g(),h._refreshBuffer(p);var j=p._muted||h._muted?0:p._volume;w.gain.setValueAtTime(j,t.ctx.currentTime),p._playStart=t.ctx.currentTime,typeof w.bufferSource.start>"u"?p._loop?w.bufferSource.noteGrainOn(0,y,86400):w.bufferSource.noteGrainOn(0,y,M):p._loop?w.bufferSource.start(0,y,86400):w.bufferSource.start(0,y,M),b!==1/0&&(h._endTimers[p._id]=setTimeout(h._ended.bind(h,p),b)),o||setTimeout(function(){h._emit("play",p._id),h._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?C():(h._playLock=!0,h.once("resume",C),h._clearTimer(p._id))}else{var W=function(){w.currentTime=y,w.muted=p._muted||h._muted||t._muted||w.muted,w.volume=p._volume*t.volume(),w.playbackRate=p._rate;try{var j=w.play();if(j&&typeof Promise<"u"&&(j instanceof Promise||typeof j.then=="function")?(h._playLock=!0,g(),j.then(function(){h._playLock=!1,w._unlocked=!0,o?h._loadQueue():h._emit("play",p._id)}).catch(function(){h._playLock=!1,h._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):o||(h._playLock=!1,g(),h._emit("play",p._id)),w.playbackRate=p._rate,w.paused){h._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||p._loop?h._endTimers[p._id]=setTimeout(h._ended.bind(h,p),b):(h._endTimers[p._id]=function(){h._ended(p),w.removeEventListener("ended",h._endTimers[p._id],!1)},w.addEventListener("ended",h._endTimers[p._id],!1))}catch(q){h._emit("playerror",p._id,q)}};w.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(w.src=h._src,w.load());var I=window&&window.ejecta||!w.readyState&&t._navigator.isCocoonJS;if(w.readyState>=3||I)W();else{h._playLock=!0,h._state="loading";var F=function(){h._state="loaded",W(),w.removeEventListener(t._canPlayEvent,F,!1)};w.addEventListener(t._canPlayEvent,F,!1),h._clearTimer(p._id)}}return p._id},pause:function(i){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(i)}}),o;for(var h=o._getSoundIds(i),d=0;d<h.length;d++){o._clearTimer(h[d]);var v=o._soundById(h[d]);if(v&&!v._paused&&(v._seek=o.seek(h[d]),v._rateSeek=0,v._paused=!0,o._stopFade(h[d]),v._node))if(o._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),o._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||o._emit("pause",v?v._id:null)}return o},stop:function(i,o){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(i)}}),h;for(var d=h._getSoundIds(i),v=0;v<d.length;v++){h._clearTimer(d[v]);var _=h._soundById(d[v]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,h._stopFade(d[v]),_._node&&(h._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),h._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&h._clearSound(_._node))),o||h._emit("stop",_._id))}return h},mute:function(i,o){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(i,o)}}),h;if(typeof o>"u")if(typeof i=="boolean")h._muted=i;else return h._muted;for(var d=h._getSoundIds(o),v=0;v<d.length;v++){var _=h._soundById(d[v]);_&&(_._muted=i,_._interval&&h._stopFade(_._id),h._webAudio&&_._node?_._node.gain.setValueAtTime(i?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:i),h._emit("mute",_._id))}return h},volume:function(){var i=this,o=arguments,h,d;if(o.length===0)return i._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?d=parseInt(o[0],10):h=parseFloat(o[0])}else o.length>=2&&(h=parseFloat(o[0]),d=parseInt(o[1],10));var p;if(typeof h<"u"&&h>=0&&h<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;typeof d>"u"&&(i._volume=h),d=i._getSoundIds(d);for(var m=0;m<d.length;m++)p=i._soundById(d[m]),p&&(p._volume=h,o[2]||i._stopFade(d[m]),i._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(h,t.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=h*t.volume()),i._emit("volume",p._id))}else return p=d?i._soundById(d):i._sounds[0],p?p._volume:0;return i},fade:function(i,o,h,d){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(i,o,h,d)}}),v;i=Math.min(Math.max(0,parseFloat(i)),1),o=Math.min(Math.max(0,parseFloat(o)),1),h=parseFloat(h),v.volume(i,d);for(var _=v._getSoundIds(d),p=0;p<_.length;p++){var m=v._soundById(_[p]);if(m){if(d||v._stopFade(_[p]),v._webAudio&&!m._muted){var y=t.ctx.currentTime,M=y+h/1e3;m._volume=i,m._node.gain.setValueAtTime(i,y),m._node.gain.linearRampToValueAtTime(o,M)}v._startFadeInterval(m,i,o,h,_[p],typeof d>"u")}}return v},_startFadeInterval:function(i,o,h,d,v,_){var p=this,m=o,y=h-o,M=Math.abs(y/.01),b=Math.max(4,M>0?d/M:d),x=Date.now();i._fadeTo=h,i._interval=setInterval(function(){var A=(Date.now()-x)/d;x=Date.now(),m+=y*A,m=Math.round(m*100)/100,y<0?m=Math.max(h,m):m=Math.min(h,m),p._webAudio?i._volume=m:p.volume(m,i._id,!0),_&&(p._volume=m),(h<o&&m<=h||h>o&&m>=h)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,p.volume(h,i._id),p._emit("fade",i._id))},b)},_stopFade:function(i){var o=this,h=o._soundById(i);return h&&h._interval&&(o._webAudio&&h._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(h._interval),h._interval=null,o.volume(h._fadeTo,i),h._fadeTo=null,o._emit("fade",i)),o},loop:function(){var i=this,o=arguments,h,d,v;if(o.length===0)return i._loop;if(o.length===1)if(typeof o[0]=="boolean")h=o[0],i._loop=h;else return v=i._soundById(parseInt(o[0],10)),v?v._loop:!1;else o.length===2&&(h=o[0],d=parseInt(o[1],10));for(var _=i._getSoundIds(d),p=0;p<_.length;p++)v=i._soundById(_[p]),v&&(v._loop=h,i._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=h,h&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,i.playing(_[p])&&(i.pause(_[p],!0),i.play(_[p],!0)))));return i},rate:function(){var i=this,o=arguments,h,d;if(o.length===0)d=i._sounds[0]._id;else if(o.length===1){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?d=parseInt(o[0],10):h=parseFloat(o[0])}else o.length===2&&(h=parseFloat(o[0]),d=parseInt(o[1],10));var p;if(typeof h=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;typeof d>"u"&&(i._rate=h),d=i._getSoundIds(d);for(var m=0;m<d.length;m++)if(p=i._soundById(d[m]),p){i.playing(d[m])&&(p._rateSeek=i.seek(d[m]),p._playStart=i._webAudio?t.ctx.currentTime:p._playStart),p._rate=h,i._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(h,t.ctx.currentTime):p._node&&(p._node.playbackRate=h);var y=i.seek(d[m]),M=(i._sprite[p._sprite][0]+i._sprite[p._sprite][1])/1e3-y,b=M*1e3/Math.abs(p._rate);(i._endTimers[d[m]]||!p._paused)&&(i._clearTimer(d[m]),i._endTimers[d[m]]=setTimeout(i._ended.bind(i,p),b)),i._emit("rate",p._id)}}else return p=i._soundById(d),p?p._rate:i._rate;return i},seek:function(){var i=this,o=arguments,h,d;if(o.length===0)i._sounds.length&&(d=i._sounds[0]._id);else if(o.length===1){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?d=parseInt(o[0],10):i._sounds.length&&(d=i._sounds[0]._id,h=parseFloat(o[0]))}else o.length===2&&(h=parseFloat(o[0]),d=parseInt(o[1],10));if(typeof d>"u")return 0;if(typeof h=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,o)}}),i;var p=i._soundById(d);if(p)if(typeof h=="number"&&h>=0){var m=i.playing(d);m&&i.pause(d,!0),p._seek=h,p._ended=!1,i._clearTimer(d),!i._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=h);var y=function(){m&&i.play(d,!0),i._emit("seek",d)};if(m&&!i._webAudio){var M=function(){i._playLock?setTimeout(M,0):y()};setTimeout(M,0)}else y()}else if(i._webAudio){var b=i.playing(d)?t.ctx.currentTime-p._playStart:0,x=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(x+b*Math.abs(p._rate))}else return p._node.currentTime;return i},playing:function(i){var o=this;if(typeof i=="number"){var h=o._soundById(i);return h?!h._paused:!1}for(var d=0;d<o._sounds.length;d++)if(!o._sounds[d]._paused)return!0;return!1},duration:function(i){var o=this,h=o._duration,d=o._soundById(i);return d&&(h=o._sprite[d._sprite][1]/1e3),h},state:function(){return this._state},unload:function(){for(var i=this,o=i._sounds,h=0;h<o.length;h++)o[h]._paused||i.stop(o[h]._id),i._webAudio||(i._clearSound(o[h]._node),o[h]._node.removeEventListener("error",o[h]._errorFn,!1),o[h]._node.removeEventListener(t._canPlayEvent,o[h]._loadFn,!1),o[h]._node.removeEventListener("ended",o[h]._endFn,!1),t._releaseHtml5Audio(o[h]._node)),delete o[h]._node,i._clearTimer(o[h]._id);var d=t._howls.indexOf(i);d>=0&&t._howls.splice(d,1);var v=!0;for(h=0;h<t._howls.length;h++)if(t._howls[h]._src===i._src||i._src.indexOf(t._howls[h]._src)>=0){v=!1;break}return a&&v&&delete a[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,o,h,d){var v=this,_=v["_on"+i];return typeof o=="function"&&_.push(d?{id:h,fn:o,once:d}:{id:h,fn:o}),v},off:function(i,o,h){var d=this,v=d["_on"+i],_=0;if(typeof o=="number"&&(h=o,o=null),o||h)for(_=0;_<v.length;_++){var p=h===v[_].id;if(o===v[_].fn&&p||!o&&p){v.splice(_,1);break}}else if(i)d["_on"+i]=[];else{var m=Object.keys(d);for(_=0;_<m.length;_++)m[_].indexOf("_on")===0&&Array.isArray(d[m[_]])&&(d[m[_]]=[])}return d},once:function(i,o,h){var d=this;return d.on(i,o,h,1),d},_emit:function(i,o,h){for(var d=this,v=d["_on"+i],_=v.length-1;_>=0;_--)(!v[_].id||v[_].id===o||i==="load")&&(setTimeout(function(p){p.call(this,o,h)}.bind(d,v[_].fn),0),v[_].once&&d.off(i,v[_].fn,v[_].id));return d._loadQueue(i),d},_loadQueue:function(i){var o=this;if(o._queue.length>0){var h=o._queue[0];h.event===i&&(o._queue.shift(),o._loadQueue()),i||h.action()}return o},_ended:function(i){var o=this,h=i._sprite;if(!o._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(o._ended.bind(o,i),100),o;var d=!!(i._loop||o._sprite[h][2]);if(o._emit("end",i._id),!o._webAudio&&d&&o.stop(i._id,!0).play(i._id),o._webAudio&&d){o._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var v=(i._stop-i._start)*1e3/Math.abs(i._rate);o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),v)}return o._webAudio&&!d&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,o._clearTimer(i._id),o._cleanBuffer(i._node),t._autoSuspend()),!o._webAudio&&!d&&o.stop(i._id,!0),o},_clearTimer:function(i){var o=this;if(o._endTimers[i]){if(typeof o._endTimers[i]!="function")clearTimeout(o._endTimers[i]);else{var h=o._soundById(i);h&&h._node&&h._node.removeEventListener("ended",o._endTimers[i],!1)}delete o._endTimers[i]}return o},_soundById:function(i){for(var o=this,h=0;h<o._sounds.length;h++)if(i===o._sounds[h]._id)return o._sounds[h];return null},_inactiveSound:function(){var i=this;i._drain();for(var o=0;o<i._sounds.length;o++)if(i._sounds[o]._ended)return i._sounds[o].reset();return new n(i)},_drain:function(){var i=this,o=i._pool,h=0,d=0;if(!(i._sounds.length<o)){for(d=0;d<i._sounds.length;d++)i._sounds[d]._ended&&h++;for(d=i._sounds.length-1;d>=0;d--){if(h<=o)return;i._sounds[d]._ended&&(i._webAudio&&i._sounds[d]._node&&i._sounds[d]._node.disconnect(0),i._sounds.splice(d,1),h--)}}},_getSoundIds:function(i){var o=this;if(typeof i>"u"){for(var h=[],d=0;d<o._sounds.length;d++)h.push(o._sounds[d]._id);return h}else return[i]},_refreshBuffer:function(i){var o=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=a[o._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),o},_cleanBuffer:function(i){var o=this,h=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),h))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,o},_clearSound:function(i){var o=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);o||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(i){this._parent=i,this.init()};n.prototype={init:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,o._sounds.push(i),i.create(),i},create:function(){var i=this,o=i._parent,h=t._muted||i._muted||i._parent._muted?0:i._volume;return o._webAudio?(i._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(h,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=o._src,i._node.preload=o._preload===!0?"auto":o._preload,i._node.volume=h*t.volume(),i._node.load()),i},reset:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,o=i._parent;o._duration=Math.ceil(i._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,o=i._parent;o._duration===1/0&&(o._duration=Math.ceil(i._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var a={},s=function(i){var o=i._src;if(a[o]){i._duration=a[o].duration,f(i);return}if(/^data:[^;]+;base64,/.test(o)){for(var h=atob(o.split(",")[1]),d=new Uint8Array(h.length),v=0;v<h.length;++v)d[v]=h.charCodeAt(v);l(d.buffer,i)}else{var _=new XMLHttpRequest;_.open(i._xhr.method,o,!0),_.withCredentials=i._xhr.withCredentials,_.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(p){_.setRequestHeader(p,i._xhr.headers[p])}),_.onload=function(){var p=(_.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}l(_.response,i)},_.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete a[o],i.load())},c(_)}},c=function(i){try{i.send()}catch{i.onerror()}},l=function(i,o){var h=function(){o._emit("loaderror",null,"Decoding audio data failed.")},d=function(v){v&&o._sounds.length>0?(a[o._src]=v,f(o,v)):h()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(d).catch(h):t.ctx.decodeAudioData(i,d,h)},f=function(i,o){o&&!i._duration&&(i._duration=o.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},u=function(){if(!!t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),o=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),h=o?parseInt(o[1],10):null;if(i&&h&&h<9){var d=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!d&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:r}}),typeof Ee<"u"&&(Ee.Howler=t,Ee.Howl=r),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=r,global.Sound=n):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=n)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var n=r._howls.length-1;n>=0;n--)r._howls[n].stereo(t);return r},HowlerGlobal.prototype.pos=function(t,r,n){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(r=typeof r!="number"?a._pos[1]:r,n=typeof n!="number"?a._pos[2]:n,typeof t=="number")a._pos=[t,r,n],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,r,n,a,s,c){var l=this;if(!l.ctx||!l.ctx.listener)return l;var f=l._orientation;if(r=typeof r!="number"?f[1]:r,n=typeof n!="number"?f[2]:n,a=typeof a!="number"?f[3]:a,s=typeof s!="number"?f[4]:s,c=typeof c!="number"?f[5]:c,typeof t=="number")l._orientation=[t,r,n,a,s,c],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(c,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,r,n,a,s,c);else return f;return l},Howl.prototype.init=function(t){return function(r){var n=this;return n._orientation=r.orientation||[1,0,0],n._stereo=r.stereo||null,n._pos=r.pos||null,n._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},n._onstereo=r.onstereo?[{fn:r.onstereo}]:[],n._onpos=r.onpos?[{fn:r.onpos}]:[],n._onorientation=r.onorientation?[{fn:r.onorientation}]:[],t.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var n=this;if(!n._webAudio)return n;if(n._state!=="loaded")return n._queue.push({event:"stereo",action:function(){n.stereo(t,r)}}),n;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof t=="number")n._stereo=t,n._pos=[t,0,0];else return n._stereo;for(var s=n._getSoundIds(r),c=0;c<s.length;c++){var l=n._soundById(s[c]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,a),a==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",l._id);else return l._stereo}return n},Howl.prototype.pos=function(t,r,n,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,r,n,a)}}),s;if(r=typeof r!="number"?0:r,n=typeof n!="number"?-.5:n,typeof a>"u")if(typeof t=="number")s._pos=[t,r,n];else return s._pos;for(var c=s._getSoundIds(a),l=0;l<c.length;l++){var f=s._soundById(c[l]);if(f)if(typeof t=="number")f._pos=[t,r,n],f._node&&((!f._panner||f._panner.pan)&&e(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setPosition(t,r,n)),s._emit("pos",f._id);else return f._pos}return s},Howl.prototype.orientation=function(t,r,n,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,r,n,a)}}),s;if(r=typeof r!="number"?s._orientation[1]:r,n=typeof n!="number"?s._orientation[2]:n,typeof a>"u")if(typeof t=="number")s._orientation=[t,r,n];else return s._orientation;for(var c=s._getSoundIds(a),l=0;l<c.length;l++){var f=s._soundById(c[l]);if(f)if(typeof t=="number")f._orientation=[t,r,n],f._node&&(f._panner||(f._pos||(f._pos=s._pos||[0,0,-.5]),e(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):f._panner.setOrientation(t,r,n)),s._emit("orientation",f._id);else return f._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,r=arguments,n,a,s;if(!t._webAudio)return t;if(r.length===0)return t._pannerAttr;if(r.length===1)if(typeof r[0]=="object")n=r[0],typeof a>"u"&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),t._pannerAttr={coneInnerAngle:typeof n.pannerAttr.coneInnerAngle<"u"?n.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof n.pannerAttr.coneOuterAngle<"u"?n.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof n.pannerAttr.coneOuterGain<"u"?n.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof n.pannerAttr.distanceModel<"u"?n.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof n.pannerAttr.maxDistance<"u"?n.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof n.pannerAttr.refDistance<"u"?n.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof n.pannerAttr.rolloffFactor<"u"?n.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof n.pannerAttr.panningModel<"u"?n.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(r[0],10)),s?s._pannerAttr:t._pannerAttr;else r.length===2&&(n=r[0],a=parseInt(r[1],10));for(var c=t._getSoundIds(a),l=0;l<c.length;l++)if(s=t._soundById(c[l]),s){var f=s._pannerAttr;f={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:f.coneOuterGain,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:f.distanceModel,maxDistance:typeof n.maxDistance<"u"?n.maxDistance:f.maxDistance,refDistance:typeof n.refDistance<"u"?n.refDistance:f.refDistance,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:f.rolloffFactor,panningModel:typeof n.panningModel<"u"?n.panningModel:f.panningModel};var u=s._panner;u?(u.coneInnerAngle=f.coneInnerAngle,u.coneOuterAngle=f.coneOuterAngle,u.coneOuterGain=f.coneOuterGain,u.distanceModel=f.distanceModel,u.maxDistance=f.maxDistance,u.refDistance=f.refDistance,u.rolloffFactor=f.rolloffFactor,u.panningModel=f.panningModel):(s._pos||(s._pos=t._pos||[0,0,-.5]),e(s,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var r=this,n=r._parent;r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,t.call(this),r._stereo?n.stereo(r._stereo):r._pos&&n.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var r=this,n=r._parent;return r._orientation=n._orientation,r._stereo=n._stereo,r._pos=n._pos,r._pannerAttr=n._pannerAttr,r._stereo?n.stereo(r._stereo):r._pos?n.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,n._refreshBuffer(r)),t.call(this)}}(Sound.prototype.reset);var e=function(t,r){r=r||"spatial",r==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var Wl={};var xh,kr=$(()=>{xh=J($e());WL.registerComponent("howler-audio-listener",{spatial:{type:WL.Type.Bool,default:!0}},{init:function(){this.origin=new Float32Array(3),this.fwd=new Float32Array(3),this.up=new Float32Array(3)},update:function(){!this.spatial||(this.object.getTranslationWorld(this.origin),this.object.getForward(this.fwd),this.object.getUp(this.up),Howler.pos(this.origin[0],this.origin[1],this.origin[2]),Howler.orientation(this.fwd[0],this.fwd[1],this.fwd[2],this.up[0],this.up[1],this.up[2]))}})});var kl={};var Cr,Dr=$(()=>{Cr=J($e());WL.registerComponent("howler-audio-source",{volume:{type:WL.Type.Float,default:1},spatial:{type:WL.Type.Bool,default:!0},loop:{type:WL.Type.Bool,default:!1},autoplay:{type:WL.Type.Bool,default:!1},src:{type:WL.Type.String,default:""}},{start:function(){this.audio=new Cr.Howl({src:[this.src],loop:this.loop,volume:this.volume,autoplay:this.autoplay}),this.lastPlayedAudioId=null,this.origin=new Float32Array(3),this.lastOrigin=new Float32Array(3),this.spatial&&this.autoplay&&(this.updatePosition(),this.play());let e=()=>{this.stop();let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)};WL.onSceneLoaded.push(e)},update:function(){!this.spatial||!this.lastPlayedAudioId||(this.object.getTranslationWorld(this.origin),(Math.abs(this.lastOrigin[0]-this.origin[0])>.005||Math.abs(this.lastOrigin[1]-this.origin[1])>.005||Math.abs(this.lastOrigin[2]-this.origin[2])>.005)&&this.updatePosition())},updatePosition:function(){this.audio.pos(this.origin[0],this.origin[1],this.origin[2],this.lastPlayedAudioId),this.lastOrigin.set(this.origin)},play:function(){this.lastPlayedAudioId&&this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=this.audio.play(),this.spatial&&this.updatePosition()},stop:function(){!this.lastPlayedAudioId||(this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=null)}})});var Fr=k(()=>{WL.registerComponent("image-texture",{url:{type:WL.Type.String,default:""},meshIndex:{type:WL.Type.Int,default:0},material:{type:WL.Type.Material}},{init:function(){this.material||(console.warn("image-texture: material property not set, please set 'material' instead of deprecated 'meshIndex'."),this.material=this.object.getComponent("mesh",this.meshIndex).material)},start:function(){WL.textures.load(this.url,"anonymous").then(e=>{this.material.shader=="Flat Opaque Textured"?this.material.flatTexture=e:mat.shader=="Phong Opaque Textured"?this.material.diffuseTexture=e:console.error("Shader",this.material.shader,"not supported by image-texture")}).catch(console.err)}})});var Cl={};var jr,zr=$(()=>{jr=J(ne());WL.registerComponent("mouse-look",{sensitity:{type:WL.Type.Float,default:.25},requireMouseDown:{type:WL.Type.Bool,default:!0},mouseButtonIndex:{type:WL.Type.Int,default:0}},{init:function(){this.currentRotationY=0,this.currentRotationX=0,this.origin=new Float32Array(3),this.parentOrigin=new Float32Array(3),document.addEventListener("mousemove",function(e){this.active&&(this.mouseDown||!this.requireMouseDown)&&(this.rotationY=-this.sensitity*e.movementX/100,this.rotationX=-this.sensitity*e.movementY/100,this.currentRotationX+=this.rotationX,this.currentRotationY+=this.rotationY,this.currentRotationX=Math.min(1.507,this.currentRotationX),this.currentRotationX=Math.max(-1.507,this.currentRotationX),this.object.getTranslationWorld(this.origin),this.object.parent.getTranslationWorld(this.parentOrigin),jr.vec3.sub(this.origin,this.origin,this.parentOrigin),this.object.resetTranslationRotation(),this.object.rotateAxisAngleRad([1,0,0],this.currentRotationX),this.object.rotateAxisAngleRad([0,1,0],this.currentRotationY),this.object.translate(this.origin))}.bind(this)),this.requireMouseDown&&(this.mouseButtonIndex==2&&WL.canvas.addEventListener("contextmenu",function(e){e.preventDefault()},!1),WL.canvas.addEventListener("mousedown",function(e){if(e.button==this.mouseButtonIndex&&(this.mouseDown=!0,document.body.style.cursor="grabbing",e.button==1))return e.preventDefault(),!1}.bind(this)),WL.canvas.addEventListener("mouseup",function(e){e.button==this.mouseButtonIndex&&(this.mouseDown=!1,document.body.style.cursor="initial")}.bind(this)))},start:function(){this.rotationX=0,this.rotationY=0}})});var Nr=k(()=>{WL.registerComponent("target-framerate",{framerate:{type:WL.Type.Float,default:90}},{start:function(){WL.xrSession?this.setTargetFramerate(WL.xrSession):WL.onXRSessionStart.push(this.setTargetFramerate.bind(this))},setTargetFramerate:function(e){if(e.supportedFrameRates&&e.updateTargetFrameRate){let t=WL.xrSession.supportedFrameRates;t.sort((r,n)=>Math.abs(r-this.framerate)-Math.abs(n-this.framerate)),WL.xrSession.updateTargetFrameRate(t[0])}}})});var Dl={};var le,Vr=$(()=>{le=J(ne());WL.registerComponent("teleport",{teleportIndicatorMeshObject:{type:WL.Type.Object},camRoot:{type:WL.Type.Object},cam:{type:WL.Type.Object},eyeLeft:{type:WL.Type.Object},eyeRight:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},floorGroup:{type:WL.Type.Int,default:1},thumbstickActivationThreshhold:{type:WL.Type.Float,default:-.7},thumbstickDeactivationThreshhold:{type:WL.Type.Float,default:.3},indicatorYOffset:{type:WL.Type.Float,default:.01},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},maxDistance:{type:WL.Type.Float,default:100}},{init:function(){if(this._prevThumbstickAxis=new Float32Array(2),this._tempVec=new Float32Array(3),this._tempVec0=new Float32Array(3),this._currentIndicatorRotation=0,this.input=this.object.getComponent("input"),!this.input){console.error(this.object.name,"generic-teleport-component.js: input component is required on the object");return}if(!this.teleportIndicatorMeshObject){console.error(this.object.name,"generic-teleport-component.js: Teleport indicator mesh is missing");return}if(!this.camRoot){console.error(this.object.name,"generic-teleport-component.js: camRoot not set");return}this.isIndicating=!1,this.cam&&(this.isMouseIndicating=!1,WL.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),WL.canvas.addEventListener("mouseup",this.onMouseUp.bind(this))),this.indicatorHidden=!0,this.hitSpot=new Float32Array(3),this._hasHit=!1,this._extraRotation=0,this._currentStickAxes=new Float32Array(2)},start:function(){if(this.handedness==0){let e=this.object.getComponent("input");e?(this.handedness=e.handedness,this.input=e):console.warn("teleport component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];WL.onXRSessionStart.push(this.setupVREvents.bind(this)),this.teleportIndicatorMeshObject.active=!1},_getCamRotation:function(){return this.eyeLeft.getForward(this._tempVec),this._tempVec[1]=0,le.vec3.normalize(this._tempVec,this._tempVec),Math.atan2(this._tempVec[0],this._tempVec[2])},update:function(){let e=0;if(this.gamepad&&this.gamepad.axes&&(this._currentStickAxes[0]=this.gamepad.axes[2],this._currentStickAxes[1]=this.gamepad.axes[3],e=Math.abs(this._currentStickAxes[0])+Math.abs(this._currentStickAxes[1])),!this.isIndicating&&this._prevThumbstickAxis[1]>=this.thumbstickActivationThreshhold&&this._currentStickAxes[1]<this.thumbstickActivationThreshhold?this.isIndicating=!0:this.isIndicating&&e<this.thumbstickDeactivationThreshhold&&(this.isIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,this._extraRotation)),this.isIndicating&&this.teleportIndicatorMeshObject&&this.input){let t=this._tempVec0;le.quat2.getTranslation(t,this.object.transformWorld);let r=this.object.getForward(this._tempVec),n=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(t,r,1<<this.floorGroup):WL.physics.rayCast(t,r,1<<this.floorGroup,this.maxDistance);n.hitCount>0?(this.indicatorHidden=!1,this._extraRotation=Math.PI+Math.atan2(this._currentStickAxes[0],this._currentStickAxes[1]),this._currentIndicatorRotation=this._getCamRotation()+(this._extraRotation-Math.PI),this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(n.locations[0]),this.teleportIndicatorMeshObject.translate([0,this.indicatorYOffset,0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot.set(n.locations[0]),this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)}else this.teleportIndicatorMeshObject&&this.isMouseIndicating&&this.onMousePressed();this._prevThumbstickAxis.set(this._currentStickAxes)},setupVREvents:function(e){if(this.session=e,e.addEventListener("end",function(){this.gamepad=null,this.session=null}.bind(this)),e.inputSources&&e.inputSources.length)for(let t=0;t<e.inputSources.length;t++){let r=e.inputSources[t];r.handedness==this.handedness&&(this.gamepad=r.gamepad)}e.addEventListener("inputsourceschange",function(t){if(t.added&&t.added.length)for(let r=0;r<t.added.length;r++){let n=t.added[r];n.handedness==this.handedness&&(this.gamepad=n.gamepad)}}.bind(this))},onMouseDown:function(){this.isMouseIndicating=!0},onMouseUp:function(){this.isMouseIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,0)},onMousePressed:function(){let e=[0,0,0];le.quat2.getTranslation(e,this.cam.transformWorld);let t=this.cam.getForward(this._tempVec),r=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(e,t,1<<this.floorGroup):WL.physics.rayCast(e,t,1<<this.floorGroup,this.maxDistance);r.hitCount>0?(this.indicatorHidden=!1,t[1]=0,le.vec3.normalize(t,t),this._currentIndicatorRotation=-Math.sign(t[2])*Math.acos(t[0])-Math.PI*.5,this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(r.locations[0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot=r.locations[0],this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)},_teleportPlayer:function(e,t){this.camRoot.rotateAxisAngleRad([0,1,0],t);let r=this._tempVec,n=this._tempVec0;this.session?(this.eyeLeft.getTranslationWorld(r),this.eyeRight.getTranslationWorld(n),le.vec3.add(r,r,n),le.vec3.scale(r,r,.5)):this.cam.getTranslationWorld(r),this.camRoot.getTranslationWorld(n),le.vec3.sub(r,n,r),r[0]+=e[0],r[1]=e[1],r[2]+=e[2],this.camRoot.setTranslationWorld(r)}})});var jl={};var E,Fl,Yr=$(()=>{E=J(ne());Math.clamp=function(e,t,r){return Math.max(t,Math.min(e,r))};Fl=function(){let e=new Float32Array(3),t=new Float32Array(3),r=new Float32Array(3),n=new Float32Array(3),a=new Float32Array(3),s=new Float32Array(3),c=new Float32Array(3),l=new Float32Array(4),f=new Float32Array(4),u=new Float32Array(4),i=new Float32Array(4);return function(o,h,d,v,_,p,m,y,M,b){E.vec3.sub(r,v,d);let x=E.vec3.length(r);E.vec3.sub(e,v,_);let A=E.vec3.length(e);E.vec3.sub(e,p,d);let g=Math.clamp(E.vec3.length(e),m,x+A-m);E.vec3.sub(t,_,d),E.vec3.sub(n,d,v),E.vec3.sub(a,_,v),E.vec3.normalize(t,t),E.vec3.normalize(r,r),E.vec3.normalize(n,n),E.vec3.normalize(a,a),E.vec3.normalize(e,e);let w=Math.acos(Math.clamp(E.vec3.dot(t,r),-1,1)),C=Math.acos(Math.clamp(E.vec3.dot(n,a),-1,1)),W=Math.acos(Math.clamp(E.vec3.dot(t,e),-1,1)),I=Math.acos(Math.clamp((A*A-x*x-g*g)/(-2*x*g),-1,1)),F=Math.acos(Math.clamp((g*g-x*x-A*A)/(-2*x*A),-1,1));E.vec3.sub(t,_,d),E.vec3.sub(r,v,d),E.vec3.sub(e,p,d),E.vec3.cross(s,t,r),E.vec3.cross(c,t,e),b?(E.vec3.sub(r,b,v),E.vec3.transformQuat(r,[0,0,-1],M)):E.vec3.sub(r,v,d);let j=E.vec3.length(s);j==0?s.set([1,0,0]):E.vec3.scale(s,s,1/j),E.vec3.normalize(c,c),E.quat.conjugate(y,y),E.quat.setAxisAngle(f,E.vec3.transformQuat(l,s,y),I-w),E.quat.setAxisAngle(i,E.vec3.transformQuat(l,c,y),W),E.quat.mul(o,o,E.quat.mul(l,f,i)),E.quat.normalize(o,o),E.quat.conjugate(M,M),E.quat.setAxisAngle(u,E.vec3.transformQuat(l,s,M),F-C),E.quat.mul(h,h,u),E.quat.normalize(h,h)}}();WL.registerComponent("two-joint-ik-solver",{root:{type:WL.Type.Object},middle:{type:WL.Type.Object},end:{type:WL.Type.Object},target:{type:WL.Type.Object},helper:{type:WL.Type.Object}},{init:function(){this.pos=new Float32Array(3*7),this.p=[this.pos.subarray(0,3),this.pos.subarray(3,6),this.pos.subarray(6,9),this.pos.subarray(9,12),this.pos.subarray(12,15),this.pos.subarray(15,18),this.pos.subarray(18,21)]},update:function(){let e=this.p;this.root.getTranslationWorld(e[0]),this.middle.getTranslationWorld(e[1]),this.end.getTranslationWorld(e[2]),this.target.getTranslationWorld(e[3]);let t=e[4],r=e[5];this.root.getTranslationLocal(t),this.middle.getTranslationLocal(r),this.helper&&this.helper.getTranslationWorld(e[6]),Fl(this.root.transformLocal,this.middle.transformLocal,e[0],e[1],e[2],e[3],.01,this.root.transformWorld.subarray(0,4),this.middle.transformWorld.subarray(0,4),this.helper?e[6]:null),this.root.setTranslationLocal(t),this.middle.setTranslationLocal(r),this.root.setDirty(),this.middle.setDirty()}})});var Hr=k(()=>{WL.registerComponent("video-texture",{url:{type:WL.Type.String,default:""},material:{type:WL.Type.Material},loop:{type:WL.Type.Bool,default:!0},autoplay:{type:WL.Type.Bool,default:!0},muted:{type:WL.Type.Bool,default:!0}},{init:function(){if(!this.material){console.error("video-texture: material property not set");return}this.loaded=!1,this.frameUpdateRequested=!0},start:function(){this.video=document.createElement("video"),this.video.src=this.url,this.video.crossOrigin="anonymous",this.video.autoplay=this.autoplay,this.video.loop=this.loop,this.video.muted=this.muted,this.video.addEventListener("playing",function(){this.loaded=!0}.bind(this))},applyTexture:function(){let e=this.material;this.texture=new WL.Texture(this.video),e.shader=="Flat Opaque Textured"?e.flatTexture=this.texture:e.shader=="Phong Opaque Textured"?e.diffuseTexture=this.texture:console.error("Shader",e.shader,"not supported by video-texture"),"requestVideoFrameCallback"in this.video?this.video.requestVideoFrameCallback(this.updateVideo.bind(this)):this.video.addEventListener("timeupdate",function(){this.frameUpdateRequested=!0}.bind(this))},update:function(e){this.loaded&&this.frameUpdateRequested&&(this.texture?this.texture.update():this.applyTexture(),this.frameUpdateRequested=!1)},updateVideo:function(){this.frameUpdateRequested=!0,this.video.requestVideoFrameCallback(this.updateVideo.bind(this))}})});var Br=k(()=>{WL.registerComponent("vr-mode-active-switch",{activateComponents:{type:WL.Type.Enum,values:["in VR","in non-VR"],default:"in VR"},affectChildren:{type:WL.Type.Bool,default:!0}},{start:function(){this.components=[],this.getComponents(this.object),this.onXRSessionEnd(),WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},getComponents:function(e){let t=e.getComponents().filter(r=>r.type!="vr-mode-active-switch");if(this.components=this.components.concat(t),this.affectChildren){let r=e.children;for(let n=0;n<r.length;++n)this.getComponents(r[n])}},setComponentsActive:function(e){let t=this.components;for(let r=0;r<t.length;++r)t[r].active=e},onXRSessionStart:function(){!this.active||this.setComponentsActive(this.activateComponents==0)},onXRSessionEnd:function(){!this.active||this.setComponentsActive(this.activateComponents!=0)}})});var zl={};var Je,Xr=$(()=>{Je=J(ne());WL.registerComponent("wasd-controls",{speed:{type:WL.Type.Float,default:.1},headObject:{type:WL.Type.Object}},{init:function(){this.up=!1,this.right=!1,this.down=!1,this.left=!1,window.addEventListener("keydown",this.press.bind(this)),window.addEventListener("keyup",this.release.bind(this))},start:function(){this.headObject=this.headObject||this.object},update:function(){let e=[0,0,0];this.up&&(e[2]-=1),this.down&&(e[2]+=1),this.left&&(e[0]-=1),this.right&&(e[0]+=1),Je.vec3.normalize(e,e),e[0]*=this.speed,e[2]*=this.speed,Je.vec3.transformQuat(e,e,this.headObject.transformWorld),this.object.translate(e)},press:function(e){e.keyCode===38||e.keyCode===87||e.keyCode===90?this.up=!0:e.keyCode===39||e.keyCode===68?this.right=!0:e.keyCode===40||e.keyCode===83?this.down=!0:(e.keyCode===37||e.keyCode===65||e.keyCode===81)&&(this.left=!0)},release:function(e){e.keyCode===38||e.keyCode===87||e.keyCode===90?this.up=!1:e.keyCode===39||e.keyCode===68?this.right=!1:e.keyCode===40||e.keyCode===83?this.down=!1:(e.keyCode===37||e.keyCode===65||e.keyCode===81)&&(this.left=!1)}})});var Nl={};var We,Gr=$(()=>{We=J(ne());WL.registerComponent("wonderleap-ad",{auId:{type:WL.Type.String,default:"ce6f68fc-4809-4409-8f57-c631283ce5a3"},adId:{type:WL.Type.String}},{init:function(){this.mesh=this.object.getComponent("mesh",0),this.collision=this.object.addComponent("collision"),this.collision.collider=WL.Collider.Box,this.collision.group=2,this.cursorTarget=this.object.addComponent("cursor-target"),this.timeSinceLastVizCheck=0,this.visibleDuration=0,this.durationThreshold=10},start:function(){Wonderleap.fetchAd(this.auId).then(function(e){this.ad=e,WL.textures.load(e.asset,"").then(function(t){let r=WL._images[t._imageIndex];this.collision.extents=[r.width/r.height,1,.1],this.object.scale([r.width/r.height,1,1]),this.mesh.material.shader=="Phong Textured"?this.mesh.material.diffuseTexture=t:this.mesh.material.flatTexture=t}.bind(this)).catch(console.err)}.bind(this)),this.cursorTarget.addClickFunction(this.click.bind(this))},update:function(e){if(this.timeSinceLastVizCheck+=e,this.timeSinceLastVizCheck>.5){let t=this.isVisible();t&&(this.visibleDuration+=this.timeSinceLastVizCheck),this.timeSinceLastVizCheck=0,(!t&&this.visibleDuration>0||this.visibleDuration>this.durationThreshold)&&(Wonderleap.sendMetric("gaze",this.visibleDuration,this.ad.adId,this.ad.auId),this.visibleDuration=0)}},isVisible:function(){let e=WL.scene.activeViews[0];if(!e||!e.active)return console.warn("wonderleap-ad: camera object does not have an active view"),!1;let t=e.object.transformWorld,r=[0,0,0];We.quat2.getTranslation(r,t);let n=[0,0,-1];We.vec3.transformQuat(n,n,t);let a=WL.scene.rayCast(r,n,2);for(let s=0;s<a.hitCount;++s)if(a.objects[s].objectId==this.object.objectId)return!0;return!1},click:function(){let e=Module.webxr_session;if(e){e.end().then(this.click.bind(this));return}Wonderleap.sendMetric("click",0,this.ad.adId,this.ad.auId),this.ad.url&&window.open(this.ad.url,"_blank")}})});var Ur=k(()=>{window.glMatrix=ne();Tr();Sr();Or();Lr();Pr();Rr();Ir();qr();Wr();kr();Dr();Fr();zr();Nr();Vr();Yr();Hr();Br();Xr();Gr()});var Zr=k((Wh,Qr)=>{"use strict";function Vl(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0}function Yl(e,t){for(var r=e.replace(/[^A-Za-z0-9\+\/]/g,""),n=r.length,a=t?Math.ceil((n*3+1>>2)/t)*t:n*3+1>>2,s=new Uint8Array(a),c,l,f=0,u=0,i=0;i<n;i++)if(l=i&3,f|=Vl(r.charCodeAt(i))<<18-6*l,l===3||n-i===1){for(c=0;c<3&&u<a;c++,u++)s[u]=f>>>(16>>>c&24)&255;f=0}return s}Qr.exports={decode:Yl}});var Jr=k((kh,$r)=>{"use strict";$r.exports=function(e,t){return new Promise(function(r,n){var a=new XMLHttpRequest;t&&(a.responseType=t),a.open("GET",e),a.onload=function(){a.status===200?r(a.response):n(Error(a.statusText))},a.onerror=function(){n(Error("Network Error"))},a.send()})}});var Kr=k((Ch,ke)=>{"use strict";var Hl=Zr(),Bl=Jr();function Ce(e){return function(t){return typeof t=="string"&&e.test(t)}}function Ke(e,t){return typeof e=="string"?e+t:typeof e=="function"?e(t):t}function G(e,t,r,n){var a=Xl(t)?Gl:Ul(t)?Ql:Zl(t)?$l:Jl(t)?Kl:ef(t)?tf:rf(t)?nf:af(t)?sf:of(t)?cf:null,s=r||{};return a?a(e,t,s):n?Promise.resolve(n):Promise.reject("Source not valid ("+t+")")}G.fetch=Bl;function Xl(e){return e instanceof ArrayBuffer}function Gl(e,t,r){return new Promise(function(n,a){e.decodeAudioData(t,function(s){n(s)},function(){a("Can't decode audio data ("+t.slice(0,30)+"...)")})})}var Ul=Ce(/\.(mp3|wav|ogg)(\?.*)?$/i);function Ql(e,t,r){var n=Ke(r.from,t);return G(e,G.fetch(n,"arraybuffer"),r)}function Zl(e){return e&&typeof e.then=="function"}function $l(e,t,r){return t.then(function(n){return G(e,n,r)})}var Jl=Array.isArray;function Kl(e,t,r){return Promise.all(t.map(function(n){return G(e,n,r,n)}))}function ef(e){return e&&typeof e=="object"}function tf(e,t,r){var n={},a=Object.keys(t).map(function(s){if(r.only&&r.only.indexOf(s)===-1)return null;var c=t[s];return G(e,c,r,c).then(function(l){n[s]=l})});return Promise.all(a).then(function(){return n})}var rf=Ce(/\.json(\?.*)?$/i);function nf(e,t,r){var n=Ke(r.from,t);return G(e,G.fetch(n,"text").then(JSON.parse),r)}var af=Ce(/^data:audio/);function sf(e,t,r){var n=t.indexOf(",");return G(e,Hl.decode(t.slice(n+1)).buffer,r)}var of=Ce(/\.js(\?.*)?$/i);function cf(e,t,r){var n=Ke(r.from,t);return G(e,G.fetch(n,"text").then(lf),r)}function lf(e){var t=e.indexOf("MIDI.Soundfont.");if(t<0)throw Error("Invalid MIDI.js Soundfont format");t=e.indexOf("=",t)+2;var r=e.lastIndexOf(",");return JSON.parse(e.slice(t,r)+"}")}typeof ke=="object"&&ke.exports&&(ke.exports=G);typeof window<"u"&&(window.loadAudio=G)});var rn=k((Dh,tn)=>{tn.exports=ff;function ff(e){var t=e.createGain(),r=t._voltage=df(e),n=_e(r),a=_e(r),s=_e(r);return t._startAmount=_e(a),t._endAmount=_e(s),t._multiplier=_e(n),t._multiplier.connect(t),t._startAmount.connect(t),t._endAmount.connect(t),t.value=n.gain,t.startValue=a.gain,t.endValue=s.gain,t.startValue.value=0,t.endValue.value=0,Object.defineProperties(t,hf),t}var hf={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,r=this._startAmount.gain,n=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var a=this.sustain;t.cancelScheduledValues(e),r.cancelScheduledValues(e),n.cancelScheduledValues(e),n.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),r.setValueAtTime(1,e),r.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),r.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(a,this._decayFrom,en(this.decay))}},stop:{value:function(e,t){t&&(e=e-this.release);var r=e+this.release;if(this.release){var n=this._multiplier.gain,a=this._startAmount.gain,s=this._endAmount.gain;n.cancelScheduledValues(e),a.cancelScheduledValues(e),s.cancelScheduledValues(e);var c=en(this.release);if(this.attack&&e<this._decayFrom){var l=pf(0,1,this._startedAt,this._decayFrom,e);n.linearRampToValueAtTime(l,e),a.linearRampToValueAtTime(1-l,e),a.setTargetAtTime(0,e,c)}s.setTargetAtTime(1,e,c),n.setTargetAtTime(0,e,c)}return this._voltage.stop(r),r}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},uf=new Float32Array([1,1]);function df(e){var t=e.createBufferSource(),r=e.createBuffer(1,2,e.sampleRate);return r.getChannelData(0).set(uf),t.buffer=r,t.loop=!0,t}function _e(e){var t=e.context.createGain();return e.connect(t),t}function en(e){return Math.log(e+1)/Math.log(100)}function pf(e,t,r,n,a){var s=t-e,c=n-r,l=a-r,f=l/c,u=e+f*s;return u<=e&&(u=e),u>=t&&(u=t),u}});var sn=k((Fh,an)=>{"use strict";var vf=rn(),_f={},mf={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function yf(e,t,r){var n=!1,a=0,s={},c=e.createGain();c.gain.value=1;var l=Object.assign({},mf,r),f={context:e,out:c,opts:l};return t instanceof AudioBuffer?f.buffer=t:f.buffers=t,f.start=function(o,h,d){if(f.buffer&&o!==null)return f.start(null,o,h);var v=o?f.buffers[o]:f.buffer;if(v){if(!n){console.warn("SamplePlayer not connected to any node.");return}}else{console.warn("Buffer "+o+" not found.");return}var _=d||_f;h=Math.max(e.currentTime,h||0),f.emit("start",h,o,_);var p=i(o,v,_);return p.id=u(o,p),p.env.start(h),p.source.start(h),f.emit("started",h,p.id,p),_.duration&&p.stop(h+_.duration),p},f.play=function(o,h,d){return f.start(o,h,d)},f.stop=function(o,h){var d;return h=h||Object.keys(s),h.map(function(v){return d=s[v],d?(d.stop(o),d.id):null})},f.connect=function(o){return n=!0,c.connect(o),f},f.emit=function(o,h,d,v){f.onevent&&f.onevent(o,h,d,v);var _=f["on"+o];_&&_(h,d,v)},f;function u(o,h){return h.id=a++,s[h.id]=h,h.source.onended=function(){var d=e.currentTime;h.source.disconnect(),h.env.disconnect(),h.disconnect(),f.emit("ended",d,h.id,h)},h.id}function i(o,h,d){var v=e.createGain();return v.gain.value=0,v.connect(c),v.env=Mf(e,d,l),v.env.connect(v.gain),v.source=e.createBufferSource(),v.source.buffer=h,v.source.connect(v),v.source.loop=d.loop||l.loop,v.source.playbackRate.value=bf(d.cents||l.cents),v.source.loopStart=d.loopStart||l.loopStart,v.source.loopEnd=d.loopEnd||l.loopEnd,v.stop=function(_){var p=_||e.currentTime;f.emit("stop",p,o);var m=v.env.stop(p);v.source.stop(m)},v}}function nn(e){return typeof e=="number"}var gf=["attack","decay","sustain","release"];function Mf(e,t,r){var n=vf(e),a=t.adsr||r.adsr;return gf.forEach(function(s,c){a?n[s]=a[c]:n[s]=t[s]||r[s]}),n.value.value=nn(t.gain)?t.gain:nn(r.gain)?r.gain:1,n}function bf(e){return e?Math.pow(2,e/1200):1}an.exports=yf});var cn=k((jh,on)=>{on.exports=function(e){return e.on=function(t,r){if(arguments.length===1&&typeof t=="function")return e.on("event",t);var n="on"+t,a=e[n];return e[n]=a?wf(a,r):r,e},e};function wf(e,t){return function(r,n,a,s){e(r,n,a,s),t(r,n,a,s)}}});var pn=k((zh,dn)=>{"use strict";var ln=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function xf(){return ln}var Af=[0,2,4,5,7,9,11];function fn(e,t,r){if(typeof e!="string")return null;var n=ln.exec(e);if(!n||!t&&n[4])return null;var a={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};return a.pc=a.letter+a.acc,a.step=(a.letter.charCodeAt(0)+3)%7,a.alt=a.acc[0]==="b"?-a.acc.length:a.acc.length,a.chroma=Af[a.step]+a.alt,n[3]&&(a.oct=+n[3],a.midi=a.chroma+12*(a.oct+1),a.freq=hn(a.midi,r)),t&&(a.tonicOf=n[4]),a}function hn(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var un={parse:fn,regex:xf,midiToFreq:hn},Tf=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];Tf.forEach(function(e){un[e]=function(t){var r=fn(t);return r&&typeof r[e]<"u"?r[e]:null}});dn.exports=un});var _n=k((Nh,vn)=>{"use strict";var Sf=pn(),Of=function(e){return e!==null&&e!==[]&&e>=0&&e<129},Lf=function(e){return Of(e)?+e:Sf.midi(e)};vn.exports=function(e){if(e.buffers){var t=e.opts.map,r=typeof t=="function"?t:Lf,n=function(s){return s?r(s)||s:null};e.buffers=Pf(e.buffers,n);var a=e.start;e.start=function(s,c,l){var f=n(s),u=f%1;return u&&(f=Math.floor(f),l=Object.assign(l||{},{cents:Math.floor(u*100)})),a(f,c,l)}}return e};function Pf(e,t){return Object.keys(e).reduce(function(r,n){return r[t(n)]=e[n],r},{})}});var yn=k((Vh,mn)=>{"use strict";var Rf=Array.isArray,If=function(e){return e&&typeof e=="object"},qf={};mn.exports=function(e){return e.schedule=function(t,r){var n=e.context.currentTime,a=t<n?n:t;e.emit("schedule",a,r);var s,c,l,f;return r.map(function(u){if(u)Rf(u)?(s=u[0],c=u[1]):(s=u.time,c=u);else return null;return If(c)?(l=c.name||c.key||c.note||c.midi||null,f=c):(l=c,f=qf),e.start(l,a+(s||0),f)})},e}});var Mn=k((gn,et)=>{(function(e){if(typeof gn=="object"&&typeof et<"u")et.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.midimessage=e()}})(function(){var e,t,r;return function n(a,s,c){function l(i,o){if(!s[i]){if(!a[i]){var h=typeof ge=="function"&&ge;if(!o&&h)return h(i,!0);if(f)return f(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var v=s[i]={exports:{}};a[i][0].call(v.exports,function(_){var p=a[i][1][_];return l(p||_)},v,v.exports,n,a,s,c)}return s[i].exports}for(var f=typeof ge=="function"&&ge,u=0;u<c.length;u++)l(c[u]);return l}({1:[function(n,a,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(c){function l(f){if(this._event=f,this._data=f.data,this.receivedTime=f.receivedTime,this._data&&this._data.length<2){console.warn("Illegal MIDI message of length",this._data.length);return}switch(this._messageCode=f.data[0]&240,this.channel=f.data[0]&15,this._messageCode){case 128:this.messageType="noteoff",this.key=f.data[1]&127,this.velocity=f.data[2]&127;break;case 144:this.messageType="noteon",this.key=f.data[1]&127,this.velocity=f.data[2]&127;break;case 160:this.messageType="keypressure",this.key=f.data[1]&127,this.pressure=f.data[2]&127;break;case 176:this.messageType="controlchange",this.controllerNumber=f.data[1]&127,this.controllerValue=f.data[2]&127,this.controllerNumber===120&&this.controllerValue===0?this.channelModeMessage="allsoundoff":this.controllerNumber===121?this.channelModeMessage="resetallcontrollers":this.controllerNumber===122?this.controllerValue===0?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":this.controllerNumber===123&&this.controllerValue===0?this.channelModeMessage="allnotesoff":this.controllerNumber===124&&this.controllerValue===0?this.channelModeMessage="omnimodeoff":this.controllerNumber===125&&this.controllerValue===0?this.channelModeMessage="omnimodeon":this.controllerNumber===126?this.channelModeMessage="monomodeon":this.controllerNumber===127&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=f.data[1];break;case 208:this.messageType="channelpressure",this.pressure=f.data[1]&127;break;case 224:this.messageType="pitchbendchange";var u=f.data[2]&127,i=f.data[1]&127;this.pitchBend=(u<<8)+i;break}}return new l(c)},a.exports=s.default},{}]},{},[1])(1)})});var wn=k((Hh,bn)=>{var Ef=Mn();bn.exports=function(e){return e.listenToMidi=function(t,r){var n={},a=r||{},s=a.gain||function(c){return c/127};return t.onmidimessage=function(c){var l=c.messageType?c:Ef(c);if(l.messageType==="noteon"&&l.velocity===0&&(l.messageType="noteoff"),!(a.channel&&l.channel!==a.channel))switch(l.messageType){case"noteon":n[l.key]=e.play(l.key,0,{gain:s(l.velocity)});break;case"noteoff":n[l.key]&&(n[l.key].stop(),delete n[l.key]);break}},e},e}});var An=k((Bh,De)=>{"use strict";var Wf=sn(),kf=cn(),Cf=_n(),Df=yn(),Ff=wn();function xn(e,t,r){return Ff(Df(Cf(kf(Wf(e,t,r)))))}typeof De=="object"&&De.exports&&(De.exports=xn);typeof window<"u"&&(window.SamplePlayer=xn)});var Sn=k((Fe,Tn)=>{(function(e,t){typeof Fe=="object"&&typeof Tn<"u"?t(Fe):typeof define=="function"&&define.amd?define(["exports"],t):t(e.NoteParser=e.NoteParser||{})})(Fe,function(e){"use strict";function t(g,w){return Array(w+1).join(g)}function r(g){return typeof g=="number"}function n(g){return typeof g=="string"}function a(g){return g!==void 0}function s(g,w){return Math.pow(2,(g-69)/12)*(w||440)}function c(){return b}function l(g,w,C){if(typeof g!="string")return null;var W=b.exec(g);if(!W||!w&&W[4])return null;var I={letter:W[1].toUpperCase(),acc:W[2].replace(/x/g,"##")};I.pc=I.letter+I.acc,I.step=(I.letter.charCodeAt(0)+3)%7,I.alt=I.acc[0]==="b"?-I.acc.length:I.acc.length;var F=x[I.step]+I.alt;return I.chroma=F<0?12+F:F%12,W[3]&&(I.oct=+W[3],I.midi=F+12*(I.oct+1),I.freq=s(I.midi,C)),w&&(I.tonicOf=W[4]),I}function f(g){return r(g)?g<0?t("b",-g):t("#",g):""}function u(g){return r(g)?""+g:""}function i(g,w,C){return g==null?null:g.step?i(g.step,g.alt,g.oct):g<0||g>6?null:A.charAt(g)+f(w)+u(C)}function o(g){if((r(g)||n(g))&&g>=0&&g<128)return+g;var w=l(g);return w&&a(w.midi)?w.midi:null}function h(g,w){var C=o(g);return C===null?null:s(C,w)}function d(g){return(l(g)||{}).letter}function v(g){return(l(g)||{}).acc}function _(g){return(l(g)||{}).pc}function p(g){return(l(g)||{}).step}function m(g){return(l(g)||{}).alt}function y(g){return(l(g)||{}).chroma}function M(g){return(l(g)||{}).oct}var b=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/,x=[0,2,4,5,7,9,11],A="CDEFGAB";e.regex=c,e.parse=l,e.build=i,e.midi=o,e.freq=h,e.letter=d,e.acc=v,e.pc=_,e.step=p,e.alt=m,e.chroma=y,e.oct=M})});var Ln=k((Xh,On)=>{"use strict";var tt=Sn();function ie(e,t){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof ie))return new ie(e);this.nameToUrl=t||ie.nameToUrl,this.ctx=e,this.instruments={},this.promises=[]}ie.prototype.onready=function(e){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(e)};ie.prototype.instrument=function(e,t){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var r=this.ctx;if(e=e||"default",e in this.instruments)return this.instruments[e];var n={name:e,play:zf(r,t)};if(this.instruments[e]=n,e!=="default"){var a=ie.instrument(r,e,t).then(function(s){return n.play=s.play,n});this.promises.push(a),n.onready=function(s){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a.then(s)}}else n.onready=function(s){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),s()};return n};function jf(e,t,r){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),ie.instrument(e,t,r).then(function(n){return n.buffers})}ie.loadBuffers=jf;function zf(e,t){return t=t||{},function(r,n,a,s){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var c=r>0&&r<129?+r:tt.midi(r),l=c?tt.midiToFreq(c,440):null;if(!!l){a=a||.2,s=s||{};var f=s.destination||t.destination||e.destination,u=s.vcoType||t.vcoType||"sine",i=s.gain||t.gain||.4,o=e.createOscillator();o.type=u,o.frequency.value=l;var h=e.createGain();return h.gain.value=i,o.connect(h),h.connect(f),o.start(n),a>0&&o.stop(n+a),o}}}ie.noteToMidi=tt.midi;On.exports=ie});var In=k((Gh,je)=>{"use strict";var Nf=Kr(),Vf=An();function Pn(e,t,r){if(arguments.length===1)return function(l,f){return Pn(e,l,f)};var n=r||{},a=n.isSoundfontURL||Yf,s=n.nameToUrl||Rn,c=a(t)?t:s(t,n.soundfont,n.format);return Nf(e,c,{only:n.only||n.notes}).then(function(l){var f=Vf(e,l,n).connect(n.destination?n.destination:e.destination);return f.url=c,f.name=t,f})}function Yf(e){return/\.js(\?.*)?$/i.test(e)}function Rn(e,t,r){return r=r==="ogg"?r:"mp3",t=t==="FluidR3_GM"?t:"MusyngKite","https://gleitz.github.io/midi-js-soundfonts/"+t+"/"+e+"-"+r+".js"}var ze=Ln();ze.instrument=Pn;ze.nameToUrl=Rn;typeof je=="object"&&je.exports&&(je.exports=ze);typeof window<"u"&&(window.Soundfont=ze)});var st=k(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});var Hf=In();function nt(e,t,r,n){return new(r||(r=Promise))(function(a,s){function c(u){try{f(n.next(u))}catch(i){s(i)}}function l(u){try{f(n.throw(u))}catch(i){s(i)}}function f(u){u.done?a(u.value):new r(function(i){i(u.value)}).then(c,l)}f((n=n.apply(e,t||[])).next())})}function it(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(u){return function(i){return f([u,i])}}function f(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(i){u=[6,i],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Bf=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"],Xf=void 0,qn=function(){var e=window.AudioContext||window.webkitAudioContext||!1;return e?new e:(console.warn("Sorry but the WebAudio API is not supported on this browser. Please consider using Chrome or Safari for the best experience "),{})},rt=new Map,Ne=new Map,at=function(e){return nt(Xf,void 0,void 0,function(){var t,r,n,a;return it(this,function(s){switch(s.label){case 0:return rt.has(e)?[2,rt.get(e)]:(t=qn(),[4,Hf.instrument(t,e)]);case 1:return r=s.sent(),n=function(c,l){l===void 0&&(l={});var f=r.play(c,0,l);Ne.set(e+"_"+c,f),l.duration&&f.stop(t.currentTime+l.duration/1e3)},a=function(c,l){!!c&&Ne.has(e+"_"+c)?(Ne.get(e+"_"+c).stop(),Ne.delete(e+"_"+c)):r.stop()},rt.set(e,{play:n,stop:a}),[2,{play:n,stop:a}]}})})};function Gf(e,t,r){return r===void 0&&(r={}),nt(this,void 0,void 0,function(){var n;return it(this,function(a){switch(a.label){case 0:return[4,at(e)];case 1:return n=a.sent(),[4,n.play(t,r)];case 2:return a.sent(),[2]}})})}function Uf(e,t){return nt(this,void 0,void 0,function(){var r;return it(this,function(n){switch(n.label){case 0:return[4,at(e)];case 1:return r=n.sent(),r.stop(t),[2]}})})}ve.instrumentNames=Bf;ve.getAudioContext=qn;ve.getInstrument=at;ve.startNote=Gf;ve.stopNote=Uf});var $f={};async function Zf(e){if(e=="Next"){index+=1,instrumentName=ae.instrumentNames[index],(0,ae.getInstrument)(instrumentName);return}if(e=="Previous"){index-=1,instrumentName=ae.instrumentNames[index],(0,ae.getInstrument)(instrumentName);return}(0,ae.startNote)(instrumentName,e,{}),await Qf(500),(0,ae.stopNote)(instrumentName,e)}var ae,Qf,En=$(()=>{ae=J(st()),Qf=e=>new Promise(t=>setTimeout(t,e));WL.registerComponent("button",{hoverMaterial:{type:WL.Type.Material}},{init:function(){instrumentNamesTemp=[],index=0,instrumentName="xylophone"},start:function(){this.mesh=this.object.getComponent("mesh"),this.defaultMaterial=this.mesh.material,this.target=this.object.getComponent("cursor-target"),this.target.addHoverFunction(this.onHover.bind(this)),this.target.addUnHoverFunction(this.onUnHover.bind(this)),this.target.addDownFunction(this.onDown.bind(this)),this.target.addUpFunction(this.onUp.bind(this)),this.soundClick=this.object.addComponent("howler-audio-source",{src:"sfx/click.wav",spatial:!0,volume:0}),this.soundUnClick=this.object.addComponent("howler-audio-source",{src:"sfx/unclick.wav",spatial:!0,volume:0});let e=this.object.parent.children;for(let t=0;t<e.length;++t)e[t].name=="ToneName"&&(text=e[t].getComponent("text"))},update:function(){(index<0||index==null)&&(index=0),text&&(text.text=instrumentName)},onHover:function(e,t){this.mesh.material=this.hoverMaterial,t.type=="finger-cursor"&&this.onDown(e,t),this.hapticFeedback(t.object,.5,50),Zf(this.object.name)},onDown:function(e,t){this.soundClick.play(),this.object.translate([0,0,0]),this.hapticFeedback(t.object,1,20)},onUp:function(e,t){this.soundUnClick.play(),this.object.translate([0,0,0]),this.hapticFeedback(t.object,.7,20)},onUnHover:function(e,t){this.mesh.material=this.defaultMaterial,t.type=="finger-cursor"&&this.onUp(e,t),this.hapticFeedback(t.object,.3,50)},hapticFeedback:function(e,t,r){let n=e.getComponent("input");if(n&&n.xrInputSource){let a=n.xrInputSource.gamepad;a&&a.hapticActuators&&a.hapticActuators[0].pulse(t,r)}}})});var Wn=k(()=>{WL.registerComponent("stick",{},{start:function(){this.collider=this.object.getComponent("collision"),this.objects=[],this.check=!1},update:function(){let e=this.collider.queryOverlaps();for(let r=0;r<e.length;++r)this.check==!1&&((e[r].object.parent.name||"no name")=="bars"&&(e[r].object.getComponent("button").playNote(e[r].object.name),this.hapticFeedback(cursor.object,.5,50)),this.objects.push(e[r]),this.check=!0);if(e.length==0){this.check=!1;for(var t=0;t<this.objects.length;t++)this.objects[t].object.getComponent("button").stopnote();this.objects=[]}}})});Ur();En();Wn();st();})();
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
//# sourceMappingURL=wp-bundle.js.map
